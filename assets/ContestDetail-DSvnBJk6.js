import{_ as d,r as j,P as z,j as e,N as $,u as L,R as C,a as U,D as H,H as F,L as x,$ as W,c as B,h as q,V,Q}from"./index-CC_2m2uK.js";import{T as G,a as J,b,c as N}from"./TabPanel-AYfXVpxk.js";/* empty css                   */import{c as K,b as X}from"./Status-B5MSIRN5.js";function w(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function Y(s,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}function O(s,a,r){return a&&Y(s.prototype,a),s}function _(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),a&&S(s,a)}function g(s){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},g(s)}function S(s,a){return S=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},S(s,a)}function Z(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ee(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function te(s,a){return a&&(typeof a=="object"||typeof a=="function")?a:ee(s)}function k(s){var a=Z();return function(){var n=g(s),t;if(a){var c=g(this).constructor;t=Reflect.construct(n,arguments,c)}else t=n.apply(this,arguments);return te(this,t)}}function se(s){return ne(s)||ae(s)||re(s)||ie()}function ne(s){if(Array.isArray(s))return D(s)}function ae(s){if(typeof Symbol<"u"&&Symbol.iterator in Object(s))return Array.from(s)}function re(s,a){if(s){if(typeof s=="string")return D(s,a);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(s,a)}}function D(s,a){(a==null||a>s.length)&&(a=s.length);for(var r=0,n=new Array(a);r<a;r++)n[r]=s[r];return n}function ie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=String(s);if(a===0)return r;var n=r.match(/(.*?)([0-9]+)(.*)/),t=n?n[1]:"",c=n?n[3]:"",l=n?n[2]:r,u=l.length>=a?l:(se(Array(a)).map(function(){return"0"}).join("")+l).slice(a*-1);return"".concat(t).concat(u).concat(c)}var E={daysInHours:!1,zeroPadTime:2};function oe(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.now,n=r===void 0?Date.now:r,t=a.precision,c=t===void 0?0:t,l=a.controlled,u=a.offsetTime,m=u===void 0?0:u,v=a.overtime,i;typeof s=="string"?i=new Date(s).getTime():s instanceof Date?i=s.getTime():i=s,l||(i+=m);var h=l?i:i-n(),o=Math.min(20,Math.max(0,c)),p=Math.round(parseFloat(((v?h:Math.max(0,h))/1e3).toFixed(o))*1e3),f=Math.abs(p)/1e3;return{total:p,days:Math.floor(f/(3600*24)),hours:Math.floor(f/3600%24),minutes:Math.floor(f/60%60),seconds:Math.floor(f%60),milliseconds:Number((f%1*1e3).toFixed()),completed:p<=0}}function ce(s,a){var r=s.days,n=s.hours,t=s.minutes,c=s.seconds,l=Object.assign(Object.assign({},E),a),u=l.daysInHours,m=l.zeroPadTime,v=l.zeroPadDays,i=v===void 0?m:v,h=Math.min(2,m),o=u?T(n+r*24,m):T(n,h);return{days:u?"":T(r,i),hours:o,minutes:T(t,h),seconds:T(c,h)}}var I=function(s){_(r,s);var a=k(r);function r(){var n;return w(this,r),n=a.apply(this,arguments),n.state={count:n.props.count||3},n.startCountdown=function(){n.interval=window.setInterval(function(){var t=n.state.count-1;t===0?(n.stopCountdown(),n.props.onComplete&&n.props.onComplete()):n.setState(function(c){return{count:c.count-1}})},1e3)},n.stopCountdown=function(){clearInterval(n.interval)},n.addTime=function(t){n.stopCountdown(),n.setState(function(c){return{count:c.count+t}},n.startCountdown)},n}return O(r,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?j.cloneElement(this.props.children,{count:this.state.count}):null}}]),r}(j.Component);I.propTypes={count:d.number,children:d.element,onComplete:d.func};var P=function(s){_(r,s);var a=k(r);function r(n){var t;if(w(this,r),t=a.call(this,n),t.mounted=!1,t.initialTimestamp=t.calcOffsetStartTimestamp(),t.offsetStartTimestamp=t.props.autoStart?0:t.initialTimestamp,t.offsetTime=0,t.legacyMode=!1,t.legacyCountdownRef=j.createRef(),t.tick=function(){var l=t.calcTimeDelta(),u=l.completed&&!t.props.overtime?void 0:t.props.onTick;t.setTimeDeltaState(l,void 0,u)},t.start=function(){if(!t.isStarted()){var l=t.offsetStartTimestamp;t.offsetStartTimestamp=0,t.offsetTime+=l?t.calcOffsetStartTimestamp()-l:0;var u=t.calcTimeDelta();t.setTimeDeltaState(u,"STARTED",t.props.onStart),!t.props.controlled&&(!u.completed||t.props.overtime)&&(t.clearTimer(),t.interval=window.setInterval(t.tick,t.props.intervalDelay))}},t.pause=function(){t.isPaused()||(t.clearTimer(),t.offsetStartTimestamp=t.calcOffsetStartTimestamp(),t.setTimeDeltaState(t.state.timeDelta,"PAUSED",t.props.onPause))},t.stop=function(){t.isStopped()||(t.clearTimer(),t.offsetStartTimestamp=t.calcOffsetStartTimestamp(),t.offsetTime=t.offsetStartTimestamp-t.initialTimestamp,t.setTimeDeltaState(t.calcTimeDelta(),"STOPPED",t.props.onStop))},t.isStarted=function(){return t.isStatus("STARTED")},t.isPaused=function(){return t.isStatus("PAUSED")},t.isStopped=function(){return t.isStatus("STOPPED")},t.isCompleted=function(){return t.isStatus("COMPLETED")},n.date){var c=t.calcTimeDelta();t.state={timeDelta:c,status:c.completed?"COMPLETED":"STOPPED"}}else t.legacyMode=!0;return t}return O(r,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(t){this.legacyMode||this.props.date!==t.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var t=this.props,c=t.date,l=t.now,u=t.precision,m=t.controlled,v=t.overtime;return oe(c,{now:l,precision:u,controlled:m,offsetTime:this.offsetTime,overtime:v})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(t){this.legacyCountdownRef.current.addTime(t)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(t){return this.state.status===t}},{key:"setTimeDeltaState",value:function(t,c,l){var u=this;if(this.mounted){var m=t.completed&&!this.state.timeDelta.completed,v=t.completed&&c==="STARTED";m&&!this.props.overtime&&this.clearTimer();var i=function(){l&&l(u.state.timeDelta),u.props.onComplete&&(m||v)&&u.props.onComplete(t,v)};return this.setState(function(h){var o=c||h.status;return t.completed&&!u.props.overtime?o="COMPLETED":!c&&o==="COMPLETED"&&(o="STOPPED"),{timeDelta:t,status:o}},i)}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var t=this.props,c=t.daysInHours,l=t.zeroPadTime,u=t.zeroPadDays,m=this.state.timeDelta;return Object.assign(Object.assign({},m),{api:this.getApi(),props:this.props,formatted:ce(m,{daysInHours:c,zeroPadTime:l,zeroPadDays:u})})}},{key:"render",value:function(){if(this.legacyMode){var t=this.props,c=t.count,l=t.children,u=t.onComplete;return j.createElement(I,{ref:this.legacyCountdownRef,count:c,onComplete:u},l)}var m=this.props,v=m.className,i=m.overtime,h=m.children,o=m.renderer,p=this.getRenderProps();if(o)return o(p);if(h&&this.state.timeDelta.completed&&!i)return j.cloneElement(h,{countdown:p});var f=p.formatted,y=f.days,A=f.hours,M=f.minutes,R=f.seconds;return j.createElement("span",{className:v},p.total<0?"-":"",y,y?":":"",A,":",M,":",R)}}]),r}(j.Component);P.defaultProps=Object.assign(Object.assign({},E),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0});P.propTypes={date:d.oneOfType([d.instanceOf(Date),d.string,d.number]),daysInHours:d.bool,zeroPadTime:d.number,zeroPadDays:d.number,controlled:d.bool,intervalDelay:d.number,precision:d.number,autoStart:d.bool,overtime:d.bool,className:d.string,children:d.element,renderer:d.func,now:d.func,onMount:d.func,onStart:d.func,onPause:d.func,onStop:d.func,onTick:d.func,onComplete:d.func};z.array.isRequired;const le="/Client-UI/assets/level-CRFoW3Pn.png",ue=()=>e.jsx("span",{children:"Đã kết thúc!"}),de=({days:s,hours:a,minutes:r,seconds:n,completed:t})=>t?e.jsx(ue,{}):e.jsxs("span",{children:[s," ngày, ",a," giờ, ",r," phút"]}),me=({endtimeString:s})=>{const a=Date.now(),n=new Date(s).getTime()-a;return e.jsx(P,{date:Date.now()+n,renderer:de})},pe="paintings/getpaintingbyaccountcontest",ye=()=>{var h;const{contestId:s}=$(),a=L(o=>o.auth.userInfo),[r,n]=C.useState(!1),[t,c]=C.useState(""),{isLoading:l,isError:u,data:m,error:v}=U(`contests/${s}`);j.useEffect(()=>{(async()=>{const p=await V.getAllTopic("roundtopics/getalltopic",a.Id,s),f=await Q.getAllPaintingByContestAccountId(pe,s,a==null?void 0:a.Id);p.data.result.length>0&&n(!0),f.data.result.status?c(f.data.result.status):c("New"),console.log(f)})()},[]);const i=(h=m==null?void 0:m.data)==null?void 0:h.result;return l?e.jsx(H,{}):u?e.jsxs("span",{children:["Error: ",v.message]}):e.jsxs("div",{className:"item-details",children:[e.jsx(F,{}),e.jsxs("section",{className:"flat-title-page inner",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{className:"page-title-heading mg-bt-12",children:e.jsx("h1",{className:"heading text-center",children:"CHI TIẾT CUỘC THI"})}),e.jsx("div",{className:"breadcrumbs style2",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(x,{to:"/Client-UI/",children:"Trang chủ"})}),e.jsx("li",{children:"Chi tiết cuộc thi"})]})})]})})})]}),e.jsx("div",{className:"tf-section tf-item-details",children:e.jsx("div",{className:"themesflat-container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-6 col-md-12",children:e.jsx("div",{className:"content-left",children:e.jsx("div",{className:"media",children:e.jsx("img",{src:i==null?void 0:i.logo,alt:"Contest"})})})}),e.jsx("div",{className:"col-xl-6 col-md-12",children:e.jsx("div",{className:"content-right",children:e.jsxs("div",{className:"sc-item-details",children:[e.jsx("h2",{className:"style2",children:`${i==null?void 0:i.name}`}),e.jsxs("div",{className:"client-infor sc-card-contest",children:[e.jsx("div",{className:"meta-info",children:e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:W,alt:"Axies"})}),e.jsxs("div",{className:"info",children:[e.jsx("span",{children:"Tổ chức bởi"}),e.jsx("h6",{children:e.jsx(x,{className:"cursor-none",children:"Nét vẽ xanh"})})]})]})}),e.jsx("div",{className:"meta-info",children:e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:B,alt:"Axies"})}),e.jsxs("div",{className:"info",children:[e.jsx("span",{children:"Tạo bởi"}),e.jsx("h6",{children:e.jsx(x,{className:"cursor-none",children:i==null?void 0:i.account.fullName})})]})]})})]}),e.jsxs("div",{className:"meta-item-details style2",children:[e.jsxs("div",{className:"item meta-price",children:[e.jsx("span",{className:"heading",children:"Tổng số người dự thi:"}),e.jsx("div",{className:"price",children:e.jsx("div",{className:"price-box",children:e.jsx("h5",{children:(i==null?void 0:i.competitorCount)||0})})})]}),e.jsxs("div",{className:"item count-down",children:[e.jsx("span",{className:"heading style-2",children:"Thời gian"}),e.jsx(me,{endtimeString:i==null?void 0:i.endTime})]})]}),(i==null?void 0:i.status)!==K.IN_PROCESS?e.jsx(x,{to:"#",className:"disable-button loadmore style fl-button pri-3 cursor-none",children:e.jsx("span",{children:i==null?void 0:i.status})}):fe({status:t,check:r,contestId:s,userInfo:a}),e.jsx("div",{className:"flat-tabs themesflat-tabs",children:e.jsxs(G,{children:[e.jsxs(J,{children:[e.jsx(b,{children:"Cấp"}),e.jsx(b,{children:"Nhà tài trợ"}),e.jsx(b,{children:"Nội dung"})]}),e.jsx(N,{children:e.jsx("ul",{className:"bid-history-list",children:(i==null?void 0:i.educationalLevel.length)>0&&i.educationalLevel.map((o,p)=>e.jsx("li",{children:e.jsxs("div",{className:"content",children:[e.jsx("div",{className:"client",children:e.jsxs("div",{className:"sc-author-box style-2",children:[e.jsxs("div",{className:"author-avatar",children:[e.jsx(x,{to:"#",children:e.jsx("img",{src:le,alt:"Icon",className:"avatar"})}),e.jsx("div",{className:"badge"})]}),e.jsx("div",{className:"author-infor",children:e.jsx("div",{className:"name",children:e.jsx("h6",{children:e.jsx("div",{className:"text-black",children:o.level})})})})]})}),e.jsx("div",{className:"text-black",children:e.jsx("h5",{children:o.description})})]})},p))})}),e.jsx(N,{children:e.jsx("ul",{className:"bid-history-list",children:(i==null?void 0:i.resource.length)>0&&i.resource.map((o,p)=>{var f,y;return e.jsx("li",{children:e.jsxs("div",{className:"content",children:[e.jsx("div",{className:"client",children:e.jsxs("div",{className:"sc-author-box style-2",children:[e.jsxs("div",{className:"author-avatar",children:[e.jsx(x,{to:"#",children:e.jsx("img",{src:(f=o.sponsor)==null?void 0:f.logo,alt:"logo",className:"avatar"})}),e.jsx("div",{className:"badge"})]}),e.jsx("div",{className:"author-infor",children:e.jsx("div",{className:"name",children:e.jsx("h6",{children:e.jsx("div",{className:"text-black",children:(y=o.sponsor)==null?void 0:y.name})})})})]})}),e.jsx("div",{className:"price",children:e.jsx("h5",{children:o.sponsorship})})]})},p)})})}),e.jsx(N,{children:e.jsxs("div",{className:"provenance",children:[e.jsxs("p",{className:"mb-5 text-black",children:["Nội dung cuộc thi: ",i==null?void 0:i.content]}),e.jsx("p",{children:i==null?void 0:i.educationalLevel.map(o=>e.jsxs("div",{className:"mb-5 flex justify-content-between",children:[e.jsx("p",{className:"text-black",children:o==null?void 0:o.description}),e.jsx("p",{className:"text-black",style:{width:"120px"},children:"Các giải thưởng:"}),e.jsx("p",{className:"text-black",style:{width:"220px"},children:o==null?void 0:o.award.map((p,f)=>e.jsxs("div",{className:"flex justify-content-center",children:[e.jsxs("p",{className:"text-black",style:{flex:"1",textAlign:"left"},children:[p==null?void 0:p.rank,": "]}),e.jsx("p",{className:"text-black",children:p==null?void 0:p.quantity})]},f))})]}))})]})})]})})]})})})]})})}),e.jsx(q,{})]})},fe=({status:s,check:a,contestId:r,userInfo:n})=>X.includes(s)?a?e.jsx(x,{to:`/Client-UI/submit/${r}`,className:"sc-button loadmore style fl-button pri-3",children:e.jsx("span",{children:"Đăng ký dự thi"})}):e.jsx(x,{to:"#",className:"disable-button loadmore style fl-button pri-3 cursor-none",children:e.jsx("span",{children:"Bạn chưa đủ tuổi"})}):n?e.jsx(x,{to:"#",className:"disable-button loadmore style fl-button pri-3 cursor-none",children:e.jsx("span",{children:"Bạn đã đăng ký"})}):e.jsx(x,{to:`/Client-UI/submit/${r}`,className:"sc-button loadmore style fl-button pri-3",children:e.jsx("span",{children:"Đăng ký dự thi"})});export{ye as default};
