import{h as A,l as U,A as Q,B as Y,r as u,e as Z,_ as R,j as e,C as H,Q as F,a as V,u as G,z as ee}from"./index-t7M1JxVt.js";import{f as q}from"./formatDate-CVnijxLC.js";import{M as x}from"./Modal-C-fDWo_M.js";import{B as I}from"./Button-DuFqWosv.js";import{I as te}from"./Paper-CtzDK0yj.js";import{c as O}from"./createSvgIcon-Du6reu27.js";import{T as se,M as ne}from"./index-WwbRCycc.js";import{a as ae,g as re,s as L,j as oe,k as ie,c as le,S as ce}from"./Transition-Dx0NO2sn.js";import{S as de}from"./FormGroup-CzoFiCKX.js";import"./index-BF2qtIT2.js";import"./removeClass-D0mFdbeO.js";import"./ButtonBase-Dd1JVMsP.js";import"./Tooltip-BCDVv4nr.js";import"./createSvgIcon-BWanq2Yh.js";import"./Chip-CNSROudf.js";import"./Grid-wWWx4JOc.js";import"./LastPage-1F8gyUjw.js";import"./Close-CCWFWCDi.js";import"./Search-JSwTbz0G.js";function he(t){return re("MuiSwitch",t)}const T=ae("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),ue=["className","color","edge","size","sx"],me=t=>{const{classes:s,edge:a,size:m,color:o,checked:h,disabled:d}=t,p={root:["root",a&&`edge${A(a)}`,`size${A(m)}`],switchBase:["switchBase",`color${A(o)}`,h&&"checked",d&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},f=le(p,he,s);return R({},s,f)},pe=L("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.edge&&s[`edge${A(a.edge)}`],s[`size${A(a.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${T.thumb}`]:{width:16,height:16},[`& .${T.switchBase}`]:{padding:4,[`&.${T.checked}`]:{transform:"translateX(16px)"}}}}]}),xe=L(de,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.switchBase,{[`& .${T.input}`]:s.input},a.color!=="default"&&s[`color${A(a.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${T.checked}`]:{transform:"translateX(20px)"},[`&.${T.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${T.checked} + .${T.track}`]:{opacity:.5},[`&.${T.disabled} + .${T.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${T.input}`]:{left:"-100%",width:"300%"}}),({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:U(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(([,s])=>s.main&&s.light).map(([s])=>({props:{color:s},style:{[`&.${T.checked}`]:{color:(t.vars||t).palette[s].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[s].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:U(t.palette[s].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${T.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${s}DisabledColor`]:`${t.palette.mode==="light"?Q(t.palette[s].main,.62):Y(t.palette[s].main,.55)}`}},[`&.${T.checked} + .${T.track}`]:{backgroundColor:(t.vars||t).palette[s].main}}}))]})),ge=L("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,s)=>s.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),je=L("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,s)=>s.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),ve=u.forwardRef(function(s,a){const m=oe({props:s,name:"MuiSwitch"}),{className:o,color:h="primary",edge:d=!1,size:p="medium",sx:f}=m,N=Z(m,ue),v=R({},m,{color:h,edge:d,size:p}),n=me(v),c=e.jsx(je,{className:n.thumb,ownerState:v});return e.jsxs(pe,{className:ie(n.root,o),sx:f,ownerState:v,children:[e.jsx(xe,R({type:"checkbox",icon:c,checkedIcon:c,ref:a,ownerState:v},N,{classes:R({},n,{root:n.switchBase})})),e.jsx(ge,{className:n.track,ownerState:v})]})}),be=O(e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m3.3 14.71L11 12.41V7h2v4.59l3.71 3.71z"}),"AccessTimeFilled"),fe=O(e.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),Te=O(e.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth"),Ce=O(e.jsx("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8m-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12m3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8m5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8m3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"ColorLens"),ke=O(e.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"}),"School"),we=O(e.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-6 10H6v-2h8zm4-4H6v-2h12z"}),"Topic"),Ne="_titleHeader_76uvi_29",_e="_tabs_76uvi_37",ye="_content_76uvi_37",Se="_heading_76uvi_57",Be="_iconBox_76uvi_73",De="_backIcon_76uvi_83",$e="_slider_76uvi_243",Me="_indicator_76uvi_255",w={titleHeader:Ne,tabs:_e,content:ye,heading:Se,iconBox:Be,backIcon:De,slider:$e,indicator:Me},ze="_title_91j2t_1",He="_titleHeader_91j2t_15",Ae="_modalForm_91j2t_27",Fe="_inputModal_91j2t_63",Ie="_btnCreate_91j2t_71",Oe="_formControl_91j2t_99",Ee="_levelBlock_91j2t_107",Re="_roundBlock_91j2t_139",qe="_inputAward_91j2t_163",Le="_error_91j2t_173",Pe="_rankTitle_91j2t_183",y={title:ze,titleHeader:He,modalForm:Ae,inputModal:Fe,btnCreate:Ie,formControl:Oe,levelBlock:Ee,roundBlock:Re,inputAward:qe,error:Le,rankTitle:Pe};function Ve({show:t,setShow:s,title:a,callBack:m}){const o=()=>s(!1),h=()=>{o(),m()};return e.jsx(e.Fragment,{children:e.jsxs(x,{show:t,onHide:o,backdrop:"static",keyboard:!1,children:[e.jsx(x.Header,{closeButton:!0,children:e.jsxs(x.Title,{children:["Chỉnh sửa ",a]})}),e.jsxs(x.Body,{children:["Bạn có chắc chắn muốn chỉnh sửa ",a," này?"]}),e.jsxs(x.Footer,{children:[e.jsx(I,{variant:"secondary",size:"lg",onClick:o,children:"Không"}),e.jsx(I,{variant:"danger",size:"lg",onClick:h,children:"Có"})]})]})})}function Ue({modalShow:t,onHide:s,contestEdit:a,callBack:m}){const[o,h]=u.useState(!1),[d,p]=u.useState(!1),[f,N]=u.useState({}),n=(l=>{var j,C,B,$;for(const S of l)if(S.round&&S.round.length>0){const z=((C=(j=S.round.find(k=>k.name==="Vòng Sơ Khảo"))==null?void 0:j.startTime)==null?void 0:C.split("T")[0])||null,i=(($=(B=S.round.find(k=>k.name==="Vòng Chung Kết"))==null?void 0:B.endTime)==null?void 0:$.split("T")[0])||null;if(z&&i)return{startTime:z,endTime:i}}return{startTime:null,endTime:null}})(a.educationalLevel),[c,g]=u.useState(a);u.useEffect(()=>{a&&g({...a,startTime:a.startTime.split("T")[0],endTime:a.endTime.split("T")[0],currentUserId:a.createdBy})},[a]);const _=l=>{const{name:j,value:C}=l.target;g({...c,[j]:C})},M=async l=>{l.preventDefault(),l.stopPropagation();let j={};const C=new Date(c.startTime),B=new Date(c.endTime);C>=B&&(j.startTime="Ngày bắt đầu phải nhỏ hơn ngày kết thúc"),Object.keys(j).length===0?(p(!0),h(!0),N({})):(p(!1),N(j))},b=async()=>{H.put("https://webapp-240702160733.azurewebsites.net/api/contests",c).then(l=>{l.result&&(F.success("Chỉnh sửa thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),m(),s())}).catch(l=>{F.error("Có lỗi xảy ra",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),console.error("There was an error!",l)})};return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{show:o,setShow:h,title:"cuộc thi",callBack:b}),e.jsxs(x,{show:t,onHide:s,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(x.Header,{closeButton:!0,style:{margin:"0 auto"},children:e.jsx(x.Title,{id:"contained-modal-title-vcenter",style:{fontWeight:"bold",fontSize:"20px"},children:"Chỉnh sửa cuộc thi"})}),e.jsx(x.Body,{style:{height:"80vh",overflow:"hidden"},children:e.jsxs("form",{onSubmit:M,className:y.modalForm,children:[e.jsx("h4",{className:y.title,children:"Tên cuộc thi"}),e.jsx("input",{className:y.inputModal,required:!0,type:"text",name:"name",value:c.name,onChange:_}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:y.title,children:"Thời gian bắt đầu"}),e.jsx("input",{required:!0,type:"date",name:"startTime",id:"startTime",className:y.formControl,value:c.startTime,onChange:_,max:n.startTime})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h4",{className:y.title,children:"Thời gian kết thúc"}),e.jsx("input",{required:!0,type:"date",name:"endTime",id:"endTime",className:y.formControl,value:c.endTime,onChange:_,min:n.endTime})]})]}),f.startTime&&e.jsx("p",{className:y.error,children:f.startTime}),e.jsx("h4",{className:y.title,children:"Mô tả ngắn"}),e.jsx("textarea",{required:!0,name:"description",value:c.description,onChange:_}),e.jsx("h4",{className:y.title,children:"Nội dung cuộc thi"}),e.jsx("textarea",{required:!0,name:"content",value:c.content,onChange:_}),e.jsx("div",{style:{textAlign:"end"},children:e.jsx("button",{className:y.btnCreate,type:"submit",children:"Chỉnh sửa"})})]})})]})]})}const X=t=>{try{let s=new Date().toJSON().slice(0,10);const a=t.split("T")[0];return!(s<a)}catch(s){console.log(s)}};function Ge({contestFrag:t,getContestDetail:s}){const[a,m]=u.useState(!1),o=X(t.startTime),h=()=>{s()};return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{modalShow:a,onHide:()=>m(!1),contestEdit:t,callBack:h}),e.jsxs("div",{className:"flex row pb-10",children:[e.jsx("p",{className:"col-md-3",children:"Thời gian bắt đầu: "}),e.jsx("p",{className:"col-md-9",children:q(t.startTime)})]}),e.jsxs("div",{className:"flex row pb-10",children:[e.jsx("p",{className:"col-md-3",children:"Thời gian kết thúc: "}),e.jsx("p",{className:"col-md-9",children:q(t.endTime)})]}),e.jsxs("div",{className:"flex row pb-10",children:[e.jsx("p",{className:"col-md-3",children:"Mô tả ngắn: "}),e.jsx("p",{className:"col-md-9",children:t.description})]}),e.jsxs("div",{className:"flex row pb-10",children:[e.jsx("p",{className:"col-md-3",children:"Nội dung cuộc thi: "}),e.jsx("p",{className:"col-md-9",children:t.content})]}),e.jsx("div",{className:"flex justify-content-end",children:e.jsx("button",{className:"btn btn-outline-primary btn-lg",onClick:()=>m(!0),disabled:o,children:"Chỉnh sửa"})})]})}const Xe="_title_91j2t_1",Ke="_titleHeader_91j2t_15",We="_modalForm_91j2t_27",Je="_inputModal_91j2t_63",Qe="_btnCreate_91j2t_71",Ye="_formControl_91j2t_99",Ze="_levelBlock_91j2t_107",et="_roundBlock_91j2t_139",tt="_inputAward_91j2t_163",st="_error_91j2t_173",nt="_rankTitle_91j2t_183",E={title:Xe,titleHeader:Ke,modalForm:We,inputModal:Je,btnCreate:Qe,formControl:Ye,levelBlock:Ze,roundBlock:et,inputAward:tt,error:st,rankTitle:nt};function K({show:t,setShow:s,title:a,callBack:m}){const o=()=>s(!1),h=()=>{o(),m()};return e.jsx(e.Fragment,{children:e.jsxs(x,{show:t,onHide:o,backdrop:"static",keyboard:!1,children:[e.jsx(x.Header,{closeButton:!0,children:e.jsxs(x.Title,{children:["Tạo ",a]})}),e.jsxs(x.Body,{children:["Bạn có chắc chắn muốn tạo ",a," này?"]}),e.jsxs(x.Footer,{children:[e.jsx(I,{variant:"secondary",size:"lg",onClick:o,children:"Không"}),e.jsx(I,{variant:"danger",size:"lg",onClick:h,children:"Có"})]})]})})}function at({modalShow:t,onHide:s,contestId:a}){const[m,o]=u.useState(!1),[h,d]=u.useState({}),{userInfo:p}=V(l=>l.auth),f=G(),[N,v]=u.useState(!1);u.useEffect(()=>{console.log(p),p===null&&f("/login"),g(n)},[t]);const n={description:"",level:"",contestId:a,currentUserId:p==null?void 0:p.Id},[c,g]=u.useState(n),_=l=>{try{const{name:j,value:C}=l.target;g({...c,[j]:C})}catch{}},M=async l=>{l.preventDefault(),l.stopPropagation();let j={};Object.keys(j).length===0?(o(!0),v(!0),d({})):(o(!1),d(j))},b=async()=>{H.post("https://webapp-240702160733.azurewebsites.net/api/educationallevels",c).then(l=>{l.result&&(F.success("Tạo đối tượng dự thi thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),s())}).catch(l=>{console.error("There was an error!",l)})};return e.jsxs(e.Fragment,{children:[e.jsx(K,{show:N,setShow:v,title:"đối tượng dự thi",callBack:b}),e.jsxs(x,{show:t,onHide:s,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(x.Header,{closeButton:!0,style:{margin:"0 auto"},children:e.jsx(x.Title,{id:"contained-modal-title-vcenter",style:{fontWeight:"bold",fontSize:"20px"},children:"Tạo đối tượng dự thi"})}),e.jsx(x.Body,{style:{height:"50vh",overflow:"hidden"},children:e.jsxs("form",{onSubmit:M,className:E.modalForm,children:[e.jsx("h4",{className:E.title,children:"Tên đối tượng"}),e.jsx("input",{className:E.inputModal,required:!0,type:"text",name:"level",value:c.name,onChange:_}),e.jsx("h4",{className:E.title,children:"Mô tả ngắn"}),e.jsx("textarea",{required:!0,name:"description",value:c.description,onChange:_}),e.jsx("div",{style:{textAlign:"end"},children:e.jsx("button",{className:E.btnCreate,type:"submit",children:"Tạo"})})]})})]})]})}function W({show:t,setShow:s,title:a,callBack:m}){const o=()=>s(!1),h=()=>{o(),m()};return e.jsx(e.Fragment,{children:e.jsxs(x,{show:t,onHide:o,backdrop:"static",keyboard:!1,children:[e.jsx(x.Header,{closeButton:!0,children:e.jsxs(x.Title,{children:["Xóa ",a]})}),e.jsxs(x.Body,{children:["Bạn có chắc chắn muốn xóa ",a," này?"]}),e.jsxs(x.Footer,{children:[e.jsx(I,{variant:"secondary",size:"lg",onClick:o,children:"Không"}),e.jsx(I,{variant:"danger",size:"lg",onClick:h,children:"Có"})]})]})})}function rt({levelFrag:t,getContestDetail:s}){const[a,m]=u.useState(!1),[o,h]=u.useState(!1),[d,p]=u.useState(),f=X(t.startTime),N=()=>{m(!1),s()},v=c=>{p(c),h(!0)},n=async()=>{H.patch(`https://webapp-240702160733.azurewebsites.net/api/educationallevels?id=${d}`).then(c=>{c.result&&(F.success("Xóa đối tượng dự thi thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),s())}).catch(c=>{console.error("There was an error!",c)})};return e.jsxs(e.Fragment,{children:[e.jsx(at,{modalShow:a,onHide:N,contestId:t.id}),e.jsx(W,{show:o,setShow:h,title:"đối tượng dự thi",callBack:n}),t.educationalLevel.map(c=>e.jsxs("div",{className:"flex row pb-10 align-items-center justify-content-center text-center",children:[e.jsxs("p",{className:"col-md-2",children:[c.level," :"]}),e.jsx("p",{className:"col-md-8",children:c.description||"None"}),e.jsx("div",{className:"col-md-2",children:e.jsx("button",{className:"btn btn-danger",disabled:f,onClick:()=>v(c.id),children:"Xóa"})})]},c.id)),e.jsx("div",{className:"flex justify-content-end mt-20",children:e.jsx("button",{className:"btn btn-outline-primary btn-lg",onClick:()=>m(!0),disabled:f,children:"Thêm"})})]})}function ot({contest:t,handleBack:s}){const[a,m]=u.useState();u.useEffect(()=>{o()},[]);const o=()=>{H.get(`https://webapp-240702160733.azurewebsites.net/api/contests/${t.id}`).then(d=>{m(d==null?void 0:d.result)}).catch(d=>{console.error("There was an error!",d)})},h=[{title:"Cuộc thi",icon:e.jsx(Ce,{}),component:e.jsx(Ge,{contestFrag:a,getContestDetail:o})},{title:"Đối tượng",icon:e.jsx(ke,{}),component:e.jsx(rt,{levelFrag:a,getContestDetail:o})},{title:"Vòng thi",icon:e.jsx(be,{}),component:e.jsx("h1",{})},{title:"Topic",icon:e.jsx(we,{}),component:e.jsx("h1",{})},{title:"Schedule",icon:e.jsx(Te,{}),component:e.jsx("h1",{})}];return a&&e.jsxs("div",{className:w.containerDetail,children:[e.jsxs("div",{className:w.heading,children:[e.jsx("div",{className:w.iconBox,children:e.jsx(te,{onClick:s,children:e.jsx(fe,{className:w.backIcon})})}),e.jsx("div",{children:e.jsx("h2",{className:w.titleHeader,children:"Nét vẽ xanh 2023-2024"})})]}),e.jsxs("div",{className:w.tabs,"data-tab-count":h.length,children:[h.map((d,p)=>e.jsx("input",{type:"radio",id:`tab${p+1}`,name:"tab-control",defaultChecked:p===0,className:w.tabInput},p)),e.jsx("ul",{className:w.tabList,children:h.map((d,p)=>e.jsx("li",{title:d.title,className:w.tabItem,children:e.jsxs("label",{htmlFor:`tab${p+1}`,role:"button",className:w.tabLabel,children:[d.icon,e.jsx("br",{}),e.jsx("span",{children:d.title})]})},p))}),e.jsx("div",{className:w.slider,children:e.jsx("div",{className:w.indicator})}),e.jsx("div",{className:w.content,children:h.map((d,p)=>e.jsxs("section",{className:w.contentSection,children:[e.jsx("h2",{children:d.title}),d.component]},p))})]})]})}const it="_btnCreate_16koa_3",lt="_btnAction_16koa_13",ct="_buttonContainer_16koa_45",P={btnCreate:it,btnAction:lt,buttonContainer:ct},dt="_title_91j2t_1",ht="_titleHeader_91j2t_15",ut="_modalForm_91j2t_27",mt="_inputModal_91j2t_63",pt="_btnCreate_91j2t_71",xt="_formControl_91j2t_99",gt="_levelBlock_91j2t_107",jt="_roundBlock_91j2t_139",vt="_inputAward_91j2t_163",bt="_error_91j2t_173",ft="_rankTitle_91j2t_183",r={title:dt,titleHeader:ht,modalForm:ut,inputModal:mt,btnCreate:pt,formControl:xt,levelBlock:gt,roundBlock:jt,inputAward:vt,error:bt,rankTitle:ft};function Tt({modalShow:t,onHide:s}){const[a,m]=u.useState(!1),[o,h]=u.useState({}),{userInfo:d}=V(b=>b.auth),p=G(),[f,N]=u.useState(!1);u.useEffect(()=>{d===null&&p("/login"),c(v)},[t]);const v={name:"",startTime:"",endTime:"",description:"",content:"",round1StartTime:"",round1EndTime:"",round2StartTime:"",round2EndTime:"",currentUserId:d==null?void 0:d.Id,rank1:1,rank2:1,rank3:1,rank4:1,passRound1:1},[n,c]=u.useState(v),g=b=>{try{const{name:l,value:j}=b.target;c({...n,[l]:j})}catch{}},_=async b=>{b.preventDefault(),b.stopPropagation();let l={};const j=new Date(n.startTime),C=new Date(n.endTime),B=new Date(n.round1StartTime),$=new Date(n.round1EndTime),S=new Date(n.round2StartTime),z=new Date(n.round2EndTime);j>=C&&(l.startTime="Ngày bắt đầu phải nhỏ hơn ngày kết thúc"),(B<j||$>C)&&(l.round1="Vòng sơ khảo phải nằm trong khoảng thời gian cuộc thi"),B>$&&(l.round1="Ngày bắt đầu phải nhỏ hơn ngày kết thúc"),(S<j||z>C||S<=$)&&(l.round2="Vòng chung kết phải nằm trong khoảng thời gian cuộc thi và bắt đầu sau khi vòng sơ khảo kết thúc"),S>z&&(l.round2="Ngày bắt đầu phải nhỏ hơn ngày kết thúc"),Object.keys(l).length===0?(m(!0),N(!0),h({})):(m(!1),h(l))},M=async()=>{H.post("https://webapp-240702160733.azurewebsites.net/api/contests",n).then(b=>{b.result&&(F.success("Tạo cuộc thi thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),s())}).catch(b=>{console.error("There was an error!",b)})};return e.jsxs(e.Fragment,{children:[e.jsx(K,{show:f,setShow:N,title:"cuộc thi",callBack:M}),e.jsxs(x,{show:t,onHide:s,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[e.jsx(x.Header,{closeButton:!0,style:{margin:"0 auto"},children:e.jsx(x.Title,{id:"contained-modal-title-vcenter",style:{fontWeight:"bold",fontSize:"20px"},children:"Tạo cuộc thi"})}),e.jsx(x.Body,{style:{height:"80vh",overflow:"hidden"},children:e.jsxs("form",{onSubmit:_,className:r.modalForm,children:[e.jsx("h4",{className:r.title,children:"Tên cuộc thi"}),e.jsx("input",{className:r.inputModal,required:!0,type:"text",name:"name",value:n.name,onChange:g}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:r.title,children:"Thời gian bắt đầu"}),e.jsx("input",{required:!0,type:"date",name:"startTime",id:"startTime",className:r.formControl,value:n.startTime,onChange:g})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h4",{className:r.title,children:"Thời gian kết thúc"}),e.jsx("input",{required:!0,type:"date",name:"endTime",id:"endTime",className:r.formControl,value:n.endTime,onChange:g})]})]}),o.startTime&&e.jsx("p",{className:r.error,children:o.startTime}),e.jsx("h4",{className:r.title,children:"Mô tả ngắn"}),e.jsx("textarea",{required:!0,name:"description",value:n.description,onChange:g}),e.jsx("h4",{className:r.title,children:"Nội dung cuộc thi"}),e.jsx("textarea",{required:!0,name:"content",value:n.content,onChange:g}),e.jsx("h4",{className:r.title,children:"Đối tượng tham gia"}),e.jsxs("div",{className:r.levelBlock,children:[e.jsx("p",{children:"Bảng A"}),e.jsx("p",{children:"Mầm non"})]}),e.jsxs("div",{className:r.levelBlock,children:[e.jsx("p",{children:"Bảng B"}),e.jsx("p",{children:"Tiểu học"})]}),e.jsx("h4",{className:r.title,children:"Vòng thi"}),e.jsxs("div",{style:{marginLeft:"20px"},children:[e.jsx("div",{className:r.roundBlock,children:e.jsx("h5",{children:"Vòng sơ khảo"})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:r.title,children:"Thời gian bắt đầu"}),e.jsx("input",{required:!0,type:"date",name:"round1StartTime",id:"round1StartTime",className:r.formControl,value:n.round1StartTime,onChange:g,min:n.startTime,max:n.endTime})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h4",{className:r.title,children:"Thời gian kết thúc"}),e.jsx("input",{required:!0,type:"date",name:"round1EndTime",id:"round1EndTime",className:r.formControl,value:n.round1EndTime,onChange:g,min:n.round1StartTime,max:n.endTime})]})]}),o.round1&&e.jsx("p",{className:r.error,children:o.round1}),e.jsx("div",{className:r.roundBlock,children:e.jsx("h5",{children:"Vòng chung kết"})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h5",{className:r.title,children:"Thời gian bắt đầu"}),e.jsx("input",{required:!0,type:"date",name:"round2StartTime",id:"round2StartTime",className:r.formControl,value:n.round2StartTime,onChange:g,min:n.round1EndTime,max:n.endTime})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h4",{className:r.title,children:"Thời gian kết thúc"}),e.jsx("input",{required:!0,type:"date",name:"round2EndTime",id:"round2EndTime",className:r.formControl,value:n.round2EndTime,onChange:g,min:n.round2StartTime,max:n.endTime})]})]}),o.round2&&e.jsx("p",{className:r.error,children:o.round2})]}),e.jsx("h4",{className:r.title,children:"Cơ cấu giải thưởng"}),e.jsxs("div",{className:"row mb-4 box-award",children:[e.jsxs("div",{className:"col-md-6 d-flex justify-content-center align-items-center",style:{gap:"20px"},children:[e.jsx("p",{className:r.rankTitle,children:"Giải nhất"}),e.jsx("input",{className:r.inputAward,required:!0,type:"number",min:"1",max:"99",name:"rank1",value:n.rank1,onChange:g}),e.jsx("p",{children:"giải"})]}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-center align-items-center",style:{gap:"20px"},children:[e.jsx("p",{className:r.rankTitle,children:"Giải ba"}),e.jsx("input",{className:r.inputAward,required:!0,type:"number",min:"1",max:"99",name:"rank3",value:n.rank3,onChange:g}),e.jsx("p",{children:"giải"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 d-flex justify-content-center align-items-center",style:{gap:"20px"},children:[e.jsx("p",{className:r.rankTitle,children:"Giải nhì"}),e.jsx("input",{className:r.inputAward,required:!0,type:"number",min:"1",max:"99",name:"rank2",value:n.rank2,onChange:g}),e.jsx("p",{children:"giải"})]}),e.jsxs("div",{className:"col-md-6 d-flex justify-content-center align-items-center",style:{gap:"20px"},children:[e.jsx("p",{className:r.rankTitle,children:"Giải khuyến khích"}),e.jsx("input",{className:r.inputAward,required:!0,type:"number",min:"1",max:"99",name:"rank4",value:n.rank4,onChange:g}),e.jsx("p",{children:"giải"})]})]}),e.jsx("h4",{className:r.title,children:"Số người qua vòng 1: "}),e.jsx("input",{className:r.inputAward,required:!0,type:"number",name:"passRound1",min:"1",max:"99",value:n.passRound1,onChange:g}),e.jsx("div",{style:{textAlign:"end"},children:e.jsx("button",{className:r.btnCreate,type:"submit",children:"Tạo"})})]})})]})]})}function qt(){const[t,s]=u.useState(!1),[a,m]=u.useState(!1),[o,h]=u.useState(!1),[d,p]=u.useState([]),[f,N]=u.useState(),[v,n]=u.useState(null),{userInfo:c}=V(i=>i.auth);u.useEffect(()=>{g()},[]);const g=()=>{H.get("https://webapp-240702160733.azurewebsites.net/api/contests/getallcontest").then(i=>{p(i==null?void 0:i.result)}).catch(i=>{console.error("There was an error!",i)})},_=i=>{const k=d.find(D=>D.id===i);n(k),s(!0)},M=i=>{N(i),h(!0)},b=async()=>{H.patch(`https://webapp-240702160733.azurewebsites.net/api/contests?id=${f}`).then(i=>{i.result&&(F.success("Xóa cuộc thi thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),g())}).catch(i=>{console.error("There was an error!",i)})},l=i=>{let k=new Date().toJSON().slice(0,10);const D=i.rowData[1].split("T")[0],J=i.rowData[2].split("T")[0];return D<=k&&k<=J},j=i=>{let k=new Date().toJSON().slice(0,10);const D=i.rowData[1].split("T")[0];return!(k<D)},C=[{name:"name",label:"TÊN CUỘC THI",options:{customBodyRender:i=>e.jsx("span",{children:i.length>50?i.substring(0,50)+"...":i})}},{name:"startTime",label:"THỜI GIAN BẮT ĐẦU",options:{customBodyRender:i=>q(i)}},{name:"endTime",label:"THỜI GIAN KẾT THÚC",options:{customBodyRender:i=>q(i)}},{name:"accountFullName",label:"TÊN STAFF"},{name:"TRẠNG THÁI",options:{customBodyRender:(i,k)=>{const D=l(k);return e.jsxs(e.Fragment,{children:[e.jsx(ve,{checked:D,color:"success",disabled:!0}),e.jsx("button",{className:`btn btn-lg ${D?"btn-success":"btn-secondary"}`,disabled:!0,children:D?"Active":"Inactive"})]})}}},{name:"id",label:"TƯƠNG TÁC",options:{customBodyRender:(i,k)=>e.jsxs("div",{className:P.btnAction,children:[e.jsx("button",{className:"btn btn-info btn-lg",onClick:()=>_(i),children:"Chi tiết"}),c.role==="Staff"&&e.jsx("button",{onClick:()=>M(i),disabled:j(k),className:"btn btn-danger btn-lg",children:"Xóa"})]})}}],B={selectableRows:"none",elevation:5,rowsPerPage:5,rowsPerPageOptions:[5,10,20,30],responsive:"standard",print:!1,download:!1,filter:!1},$=()=>ee({typography:{fontSize:20},palette:{background:{default:"#0f172a"},mode:"light"},components:{MuiTableCell:{styleOverrides:{head:{padding:"10px 10px",fontWeight:"bold",borderBottom:"1px solid black"},body:{color:"#000",fontWeight:"bold",borderBottom:"1px solid black"}}}}}),S=()=>{s(!1),g()},z=()=>{m(!1),g()};return e.jsxs("div",{children:[e.jsx(Tt,{modalShow:a,onHide:z}),e.jsx(W,{show:o,setShow:h,title:"cuộc thi",callBack:b}),!t&&e.jsx("div",{className:"blur-container",children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",overflow:"hidden",padding:"20px"},children:[e.jsx("div",{className:P.buttonContainer,children:e.jsx("button",{className:P.btnCreate,onClick:()=>m(!0),children:e.jsx("span",{children:"Tạo cuộc thi"})})}),e.jsx(ce,{injectFirst:!0,children:e.jsx(se,{theme:$(),children:e.jsx("div",{className:"table-contest",children:e.jsx(ne,{title:"Quản lí cuộc thi",data:d,columns:C,options:B})})})})]})}),t&&e.jsx("div",{children:e.jsx(ot,{contest:v,handleBack:S})})]})}export{qt as default};
