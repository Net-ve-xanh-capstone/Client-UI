import{r as p,m as g,n as C,o as D,a as F,j as e,L as n,I as L,p as T,T as f,q as I,e as V,s as N,t as q}from"./index-D7OzrcZT.js";import{H as M}from"./HeaderVersion1-DJTFwQ0M.js";import{c as z,a as j,o as B}from"./object-CiRscG7O.js";import{D as E,a as H}from"./DialogContent-CCeC9vkB.js";import{F as W}from"./FadeLoader-B_Pu_-Yq.js";const K=()=>{var u,x;const[a,t]=p.useState(!1),{userInfo:v}=g(s=>s.auth),b=z().shape({username:j().required("Vui lòng nhập username của bạn"),password:j().required("Vui lòng nhập mật khẩu của bạn")}),{handleSubmit:y,control:o,trigger:w,formState:{errors:i}}=C({resolver:B(b),reValidateMode:"onSubmit"}),{login:{loading:l,success:c,error:r},jwtToken:d}=g(s=>s.auth),k=D(),m=F(),S=async s=>{if(await w())k(q(s)).then(()=>{r&&t(!0)});else return},h=()=>{t(!1)};return p.useEffect(()=>{(c||d)&&(v.role==="Staff"?(reset(),m("/staff-management/contest")):(reset(),m("/"))),r&&t(!0)},[c,r,d]),e.jsxs("div",{children:[e.jsx(M,{}),e.jsxs("section",{className:"flat-title-page inner",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{className:"page-title-heading mg-bt-12",children:e.jsx("h1",{className:"heading text-center",children:"Đăng nhập"})}),e.jsx("div",{className:"breadcrumbs style2",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(n,{to:"/",children:"Trang chủ"})}),e.jsx("li",{children:"Đăng nhập"})]})})]})})})]}),e.jsxs(O,{onClose:h,"aria-labelledby":"customized-dialog-title",open:a,children:[e.jsx(L,{"aria-label":"close",onClick:h,sx:{position:"absolute",right:8,top:6,color:s=>s.palette.grey[500]},children:e.jsx(T,{})}),e.jsx(E,{children:e.jsx(Q,{className:"h3 text-center",children:"Sai tài khoản hoặc mật khẩu, vui lòng nhập lại"})})]}),e.jsx("section",{className:"tf-login tf-section",children:e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"flat-form box-login-email",children:e.jsx("div",{className:"form-inner",children:e.jsxs("form",{onSubmit:y(S),className:"select-none",children:[e.jsx(f,{control:o,error:(u=i.username)==null?void 0:u.message,id:"username",name:"username",tabIndex:"1",placeholder:"Tên tài khoản",autoFocus:!0}),e.jsx(f,{control:o,error:(x=i.password)==null?void 0:x.message,id:"password",name:"password",tabIndex:"2","aria-required":"true",type:"password",placeholder:"Mật khẩu"}),e.jsx("div",{className:"row-form style-1 flex-row-reverse",children:e.jsx(n,{to:"#",className:"forgot-pass",children:"Quên mật khẩu ?"})}),e.jsx("button",{className:"submit",children:l?e.jsx(W,{color:I.purple,loading:l,size:2}):"Đăng nhập"}),e.jsxs("div",{className:"mt-5 text-right h5",children:["Bạn chưa có tài khoản? ","",e.jsx(n,{to:"/sign-up",className:"font-weight-bold",children:"đăng ký"})]})]})})})})})})}),e.jsx(V,{})]})},O=N(H)(({theme:a})=>({"& .MuiDialogContent-root":{padding:a.spacing(5)}})),Q=N("div")(({theme:a})=>({color:a.palette.text.primary,fontSize:14,fontWeight:a.typography.fontWeightMedium}));export{K as default};
