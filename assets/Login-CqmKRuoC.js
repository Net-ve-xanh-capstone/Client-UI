import{r as j,u as f,p as S,q as D,b as L,s as N,j as e,L as o,I as T,t as U,v as V,T as v,d as q,h as M,x as z,y as B,z as E}from"./index-sRB-OdRh.js";import{H}from"./HeaderVersion1-0ElJ-Am8.js";import{c as A,a as b,o as R}from"./object-BMdq8ch6.js";import{F as G}from"./FadeLoader-DDkTiJs4.js";const K=()=>{var g,p;const[a,t]=j.useState(!1),{userInfo:l}=f(s=>s.auth),w=A().shape({username:b().required("Vui lòng nhập username của bạn"),password:b().required("Vui lòng nhập mật khẩu của bạn")}),{handleSubmit:k,control:c,trigger:C,reset:n,formState:{errors:d}}=S({resolver:R(w),reValidateMode:"onSubmit"}),{login:{loading:m,success:h,error:i},jwtToken:x}=f(s=>s.auth),I=D(),r=L(),y=async s=>{if(await C())I(E(s)).then(F=>{console.log(F),i&&t(!0)});else return},u=()=>{t(!1)};return j.useEffect(()=>{(h||x)&&(l.role===N.STAFF?(n(),r("/Client-UI/staff-management/contest")):l.role===N.ADMIN?(n(),r("/Client-UI/admin-management/")):(n(),r("/Client-UI/"))),i&&t(!0)},[h,i,x]),e.jsxs("div",{children:[e.jsx(H,{}),e.jsxs("section",{className:"flat-title-page inner",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{className:"page-title-heading mg-bt-12",children:e.jsx("h1",{className:"heading text-center",children:"ĐĂNG NHẬP"})}),e.jsx("div",{className:"breadcrumbs style2",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(o,{to:"/Client-UI/",children:"Trang chủ"})}),e.jsx("li",{children:"Đăng nhập"})]})})]})})})]}),e.jsxs(O,{onClose:u,"aria-labelledby":"customized-dialog-title",open:a,children:[e.jsx(T,{"aria-label":"close",onClick:u,sx:{position:"absolute",right:8,top:6,color:s=>s.palette.grey[500]},children:e.jsx(U,{})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-20 pd-40",children:e.jsx("h4",{className:"text-center font-weight-bold",children:"Sai tài khoản hoặc mật khẩu, xin nhập lại"})})})]}),e.jsx("section",{className:"tf-login tf-section",children:e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"flat-form box-login-email",children:e.jsx("div",{className:"form-inner",children:e.jsxs("form",{onSubmit:k(y),className:"select-none",children:[e.jsx(v,{control:c,error:(g=d.username)==null?void 0:g.message,id:"username",name:"username",tabIndex:"1",placeholder:"Tên tài khoản",autoFocus:!0}),e.jsx(v,{control:c,error:(p=d.password)==null?void 0:p.message,id:"password",name:"password",tabIndex:"2","aria-required":"true",type:"password",placeholder:"Mật khẩu"}),e.jsx("div",{className:"row-form style-1 flex-row-reverse",children:e.jsx(o,{to:"#",className:"forgot-pass",children:"Quên mật khẩu ?"})}),e.jsx("button",{className:"submit",children:m?e.jsx(G,{color:q.purple,loading:m,size:2}):"Đăng nhập"}),e.jsxs("div",{className:"mt-5 text-right h5",children:["Bạn chưa có tài khoản? ","",e.jsx(o,{to:"/Client-UI/sign-up",className:"font-weight-bold",children:"đăng ký"})]})]})})})})})})}),e.jsx(M,{})]})},O=z(B)(({theme:a})=>({"& .MuiDialogContent-root":{padding:a.spacing(5)}}));export{K as default};
