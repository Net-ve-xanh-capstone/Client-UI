import{a0 as d,r as g,j as e,Q as L,u as H,R as _,a as U,D as F,H as W,L as j,a1 as B,c as q,a2 as K,a3 as Q,a4 as P,a5 as C,h as V,X,U as G}from"./index-DXjriJ5e.js";import{c as J,d as Y}from"./Status-GYzEMVEP.js";const Z="/assets/level-CRFoW3Pn.png";function E(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function ee(s,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,n.key,n)}}function A(s,a,r){return a&&ee(s.prototype,a),s}function I(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),a&&w(s,a)}function S(s){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},S(s)}function w(s,a){return w=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n},w(s,a)}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function se(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function ne(s,a){return a&&(typeof a=="object"||typeof a=="function")?a:se(s)}function M(s){var a=te();return function(){var n=S(s),t;if(a){var o=S(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return ne(this,t)}}function ae(s){return re(s)||ie(s)||oe(s)||ce()}function re(s){if(Array.isArray(s))return O(s)}function ie(s){if(typeof Symbol<"u"&&Symbol.iterator in Object(s))return Array.from(s)}function oe(s,a){if(s){if(typeof s=="string")return O(s,a);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(s,a)}}function O(s,a){(a==null||a>s.length)&&(a=s.length);for(var r=0,n=new Array(a);r<a;r++)n[r]=s[r];return n}function ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r=String(s);if(a===0)return r;var n=r.match(/(.*?)([0-9]+)(.*)/),t=n?n[1]:"",o=n?n[3]:"",c=n?n[2]:r,l=c.length>=a?c:(ae(Array(a)).map(function(){return"0"}).join("")+c).slice(a*-1);return"".concat(t).concat(l).concat(o)}var R={daysInHours:!1,zeroPadTime:2};function le(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.now,n=r===void 0?Date.now:r,t=a.precision,o=t===void 0?0:t,c=a.controlled,l=a.offsetTime,m=l===void 0?0:l,v=a.overtime,i;typeof s=="string"?i=new Date(s).getTime():s instanceof Date?i=s.getTime():i=s,c||(i+=m);var f=c?i:i-n(),h=Math.min(20,Math.max(0,o)),u=Math.round(parseFloat(((v?f:Math.max(0,f))/1e3).toFixed(h))*1e3),p=Math.abs(u)/1e3;return{total:u,days:Math.floor(p/(3600*24)),hours:Math.floor(p/3600%24),minutes:Math.floor(p/60%60),seconds:Math.floor(p%60),milliseconds:Number((p%1*1e3).toFixed()),completed:u<=0}}function ue(s,a){var r=s.days,n=s.hours,t=s.minutes,o=s.seconds,c=Object.assign(Object.assign({},R),a),l=c.daysInHours,m=c.zeroPadTime,v=c.zeroPadDays,i=v===void 0?m:v,f=Math.min(2,m),h=l?b(n+r*24,m):b(n,f);return{days:l?"":b(r,i),hours:h,minutes:b(t,f),seconds:b(o,f)}}var z=function(s){I(r,s);var a=M(r);function r(){var n;return E(this,r),n=a.apply(this,arguments),n.state={count:n.props.count||3},n.startCountdown=function(){n.interval=window.setInterval(function(){var t=n.state.count-1;t===0?(n.stopCountdown(),n.props.onComplete&&n.props.onComplete()):n.setState(function(o){return{count:o.count-1}})},1e3)},n.stopCountdown=function(){clearInterval(n.interval)},n.addTime=function(t){n.stopCountdown(),n.setState(function(o){return{count:o.count+t}},n.startCountdown)},n}return A(r,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?g.cloneElement(this.props.children,{count:this.state.count}):null}}]),r}(g.Component);z.propTypes={count:d.number,children:d.element,onComplete:d.func};var k=function(s){I(r,s);var a=M(r);function r(n){var t;if(E(this,r),t=a.call(this,n),t.mounted=!1,t.initialTimestamp=t.calcOffsetStartTimestamp(),t.offsetStartTimestamp=t.props.autoStart?0:t.initialTimestamp,t.offsetTime=0,t.legacyMode=!1,t.legacyCountdownRef=g.createRef(),t.tick=function(){var c=t.calcTimeDelta(),l=c.completed&&!t.props.overtime?void 0:t.props.onTick;t.setTimeDeltaState(c,void 0,l)},t.start=function(){if(!t.isStarted()){var c=t.offsetStartTimestamp;t.offsetStartTimestamp=0,t.offsetTime+=c?t.calcOffsetStartTimestamp()-c:0;var l=t.calcTimeDelta();t.setTimeDeltaState(l,"STARTED",t.props.onStart),!t.props.controlled&&(!l.completed||t.props.overtime)&&(t.clearTimer(),t.interval=window.setInterval(t.tick,t.props.intervalDelay))}},t.pause=function(){t.isPaused()||(t.clearTimer(),t.offsetStartTimestamp=t.calcOffsetStartTimestamp(),t.setTimeDeltaState(t.state.timeDelta,"PAUSED",t.props.onPause))},t.stop=function(){t.isStopped()||(t.clearTimer(),t.offsetStartTimestamp=t.calcOffsetStartTimestamp(),t.offsetTime=t.offsetStartTimestamp-t.initialTimestamp,t.setTimeDeltaState(t.calcTimeDelta(),"STOPPED",t.props.onStop))},t.isStarted=function(){return t.isStatus("STARTED")},t.isPaused=function(){return t.isStatus("PAUSED")},t.isStopped=function(){return t.isStatus("STOPPED")},t.isCompleted=function(){return t.isStatus("COMPLETED")},n.date){var o=t.calcTimeDelta();t.state={timeDelta:o,status:o.completed?"COMPLETED":"STOPPED"}}else t.legacyMode=!0;return t}return A(r,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(t){this.legacyMode||this.props.date!==t.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var t=this.props,o=t.date,c=t.now,l=t.precision,m=t.controlled,v=t.overtime;return le(o,{now:c,precision:l,controlled:m,offsetTime:this.offsetTime,overtime:v})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(t){this.legacyCountdownRef.current.addTime(t)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(t){return this.state.status===t}},{key:"setTimeDeltaState",value:function(t,o,c){var l=this;if(this.mounted){var m=t.completed&&!this.state.timeDelta.completed,v=t.completed&&o==="STARTED";m&&!this.props.overtime&&this.clearTimer();var i=function(){c&&c(l.state.timeDelta),l.props.onComplete&&(m||v)&&l.props.onComplete(t,v)};return this.setState(function(f){var h=o||f.status;return t.completed&&!l.props.overtime?h="COMPLETED":!o&&h==="COMPLETED"&&(h="STOPPED"),{timeDelta:t,status:h}},i)}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var t=this.props,o=t.daysInHours,c=t.zeroPadTime,l=t.zeroPadDays,m=this.state.timeDelta;return Object.assign(Object.assign({},m),{api:this.getApi(),props:this.props,formatted:ue(m,{daysInHours:o,zeroPadTime:c,zeroPadDays:l})})}},{key:"render",value:function(){if(this.legacyMode){var t=this.props,o=t.count,c=t.children,l=t.onComplete;return g.createElement(z,{ref:this.legacyCountdownRef,count:o,onComplete:l},c)}var m=this.props,v=m.className,i=m.overtime,f=m.children,h=m.renderer,u=this.getRenderProps();if(h)return h(u);if(f&&this.state.timeDelta.completed&&!i)return g.cloneElement(f,{countdown:u});var p=u.formatted,x=p.days,y=p.hours,D=p.minutes,N=p.seconds;return g.createElement("span",{className:v},u.total<0?"-":"",x,x?":":"",y,":",D,":",N)}}]),r}(g.Component);k.defaultProps=Object.assign(Object.assign({},R),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0});k.propTypes={date:d.oneOfType([d.instanceOf(Date),d.string,d.number]),daysInHours:d.bool,zeroPadTime:d.number,zeroPadDays:d.number,controlled:d.bool,intervalDelay:d.number,precision:d.number,autoStart:d.bool,overtime:d.bool,className:d.string,children:d.element,renderer:d.func,now:d.func,onMount:d.func,onStart:d.func,onPause:d.func,onStop:d.func,onTick:d.func,onComplete:d.func};const de=()=>e.jsx("span",{children:"Đã kết thúc!"}),me=({days:s,hours:a,minutes:r,seconds:n,completed:t})=>t?e.jsx(de,{}):e.jsxs("span",{children:[s," ngày, ",a," giờ, ",r," phút"]}),pe=({endtimeString:s})=>{const a=Date.now(),n=new Date(s).getTime()-a;return e.jsx(k,{date:Date.now()+n,renderer:me})},fe="paintings/getpaintingbyaccountcontest",je=()=>{var f,h;const{contestId:s}=L(),a=H(u=>u.auth.userInfo),[r,n]=_.useState(!1),[t,o]=_.useState(""),{isLoading:c,isError:l,data:m,error:v}=U(`contests/${s}`);g.useEffect(()=>{(async()=>{const p=await X.getAllTopic("roundtopics/getalltopic",a.Id,s),x=await G.getAllPaintingByContestAccountId(fe,s,a==null?void 0:a.Id);p.data.result.length>0&&n(!0),x.data.result.status?o(x.data.result.status):o("New"),console.log(x)})()},[]);const i=(f=m==null?void 0:m.data)==null?void 0:f.result;return c?e.jsx(F,{}):l?e.jsxs("span",{children:["Error: ",v.message]}):e.jsxs("div",{className:"item-details",children:[e.jsx(W,{}),e.jsxs("section",{className:"flat-title-page inner",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{className:"page-title-heading mg-bt-12",children:e.jsx("h1",{className:"heading text-center",children:"CHI TIẾT CUỘC THI"})}),e.jsx("div",{className:"breadcrumbs style2",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(j,{to:"/",children:"Trang chủ"})}),e.jsx("li",{children:"Chi tiết cuộc thi"})]})})]})})})]}),e.jsx("div",{className:"tf-section tf-item-details",children:e.jsx("div",{className:"themesflat-container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-6 col-md-12",children:e.jsx("div",{className:"content-left",children:e.jsx("div",{className:"media",children:e.jsx("img",{src:i==null?void 0:i.logo,alt:"ContestComing"})})})}),e.jsx("div",{className:"col-xl-6 col-md-12",children:e.jsx("div",{className:"content-right",children:e.jsxs("div",{className:"sc-item-details",children:[e.jsx("h2",{className:"style2",children:`${i==null?void 0:i.name}`}),e.jsxs("div",{className:"client-infor sc-card-contest",children:[e.jsx("div",{className:"meta-info",children:e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:B,alt:"Axies"})}),e.jsxs("div",{className:"info",children:[e.jsx("span",{children:"Tổ chức bởi"}),e.jsx("h6",{children:e.jsx(j,{className:"cursor-none",children:"Nét vẽ xanh"})})]})]})}),e.jsx("div",{className:"meta-info",children:e.jsxs("div",{className:"author",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:q,alt:"Axies"})}),e.jsxs("div",{className:"info",children:[e.jsx("span",{children:"Tạo bởi"}),e.jsx("h6",{children:e.jsx(j,{className:"cursor-none",children:(h=i==null?void 0:i.account)==null?void 0:h.fullName})})]})]})})]}),e.jsxs("div",{className:"meta-item-details style2",children:[e.jsxs("div",{className:"item meta-price",children:[e.jsx("span",{className:"heading",children:"Tổng số người dự thi:"}),e.jsx("div",{className:"price",children:e.jsx("div",{className:"price-box",children:e.jsx("h5",{children:(i==null?void 0:i.competitorCount)||0})})})]}),e.jsxs("div",{className:"item count-down",children:[e.jsx("span",{className:"heading style-2",children:"Thời gian"}),e.jsx(pe,{endtimeString:i==null?void 0:i.endTime})]})]}),(i==null?void 0:i.status)!==J.IN_PROCESS?e.jsx(j,{to:"#",className:"disable-button loadmore style fl-button pri-3 cursor-none",children:e.jsx("span",{children:i==null?void 0:i.status})}):he({status:t,check:r,contestId:s,userInfo:a}),e.jsx("div",{className:"flat-tabs themesflat-tabs",children:e.jsxs(K,{children:[e.jsxs(Q,{children:[e.jsx(P,{children:"Cấp"}),e.jsx(P,{children:"Nhà tài trợ"}),e.jsx(P,{children:"Nội dung"})]}),e.jsx(C,{children:e.jsx("ul",{className:"bid-history-list",children:(i==null?void 0:i.educationalLevel.length)>0&&i.educationalLevel.map((u,p)=>e.jsx("li",{children:e.jsxs("div",{className:"content",children:[e.jsx("div",{className:"client",children:e.jsxs("div",{className:"sc-author-box style-2",children:[e.jsxs("div",{className:"author-avatar",children:[e.jsx(j,{to:"#",children:e.jsx("img",{src:Z,alt:"Icon",className:"avatar"})}),e.jsx("div",{className:"badge"})]}),e.jsx("div",{className:"author-infor",children:e.jsx("div",{className:"name",children:e.jsx("h6",{children:e.jsx("div",{className:"text-black",children:u.level})})})})]})}),e.jsx("div",{className:"text-black",children:e.jsx("h5",{children:u.description})})]})},p))})}),e.jsx(C,{children:e.jsx("ul",{className:"bid-history-list",children:(i==null?void 0:i.resource.length)>0?i.resource.map((u,p)=>{var x,y;return e.jsx("li",{children:e.jsxs("div",{className:"content",children:[e.jsx("div",{className:"client",children:e.jsxs("div",{className:"sc-author-box style-2",children:[e.jsxs("div",{className:"author-avatar",children:[e.jsx(j,{to:"#",children:e.jsx("img",{src:(x=u.sponsor)==null?void 0:x.logo,alt:"logo",className:"avatar"})}),e.jsx("div",{className:"badge"})]}),e.jsx("div",{className:"author-infor",children:e.jsx("div",{className:"name",children:e.jsx("h6",{children:e.jsx("div",{className:"text-black",children:(y=u.sponsor)==null?void 0:y.name})})})})]})}),e.jsx("div",{className:"price",children:e.jsx("h5",{children:u.sponsorship})})]})},p)}):e.jsx("div",{className:"text-black",children:e.jsx("h5",{children:"Không có nhà tài trợ"})})})}),e.jsx(C,{children:e.jsxs("div",{className:"provenance",children:[e.jsxs("p",{className:"mb-5 text-black",children:["Nội dung cuộc thi: ",i==null?void 0:i.content]}),e.jsx("div",{children:i==null?void 0:i.educationalLevel.map((u,p)=>{var x;return e.jsxs("div",{className:"mb-5 flex justify-content-between",children:[e.jsx("p",{className:"text-black",children:u==null?void 0:u.description}),e.jsx("p",{className:"text-black",style:{width:"120px"},children:"Các giải thưởng:"}),e.jsx("div",{className:"text-black",style:{width:"220px"},children:(x=u==null?void 0:u.round)==null?void 0:x.map((y,D)=>{var N;return e.jsx("div",{children:(N=y==null?void 0:y.award)==null?void 0:N.map((T,$)=>e.jsxs("div",{className:"flex justify-content-center",children:[e.jsxs("p",{className:"text-black",style:{flex:"1",textAlign:"left"},children:[T==null?void 0:T.rank,":"," "]}),e.jsx("p",{className:"text-black",children:T==null?void 0:T.quantity})]},$))},D)})})]},p)})})]})})]})})]})})})]})})}),e.jsx(V,{})]})},he=({status:s,check:a,contestId:r,userInfo:n})=>Y.includes(s)?a?e.jsx(j,{to:`/submit/${r}`,className:"sc-button loadmore style fl-button pri-3",children:e.jsx("span",{children:"Đăng ký dự thi"})}):e.jsx(j,{to:"#",className:"disable-button loadmore style fl-button pri-3 cursor-none",children:e.jsx("span",{children:"Bạn chưa đủ tuổi"})}):n?e.jsx(j,{to:"#",className:"disable-button loadmore style fl-button pri-3 cursor-none",children:e.jsx("span",{children:"Bạn đã đăng ký"})}):e.jsx(j,{to:`/submit/${r}`,className:"sc-button loadmore style fl-button pri-3",children:e.jsx("span",{children:"Đăng ký dự thi"})});export{je as default};
