import{Y as C,j as t,b8 as i,bH as b,u as M,r as c,bI as w,bv as S,bJ as P,bK as R,f as A,s as I,I as f,bL as N,bM as x,bN as D}from"./index-BQMzp9Nc.js";import{P as H,D as O}from"./DashboardCard-Dl3zU1Ib.js";import{b as L,i as v,c as z}from"./adminApi-ZvGGUxb3.js";import{r as E,e as K}from"./Status-GYzEMVEP.js";import"./Box-GteKiOpP.js";const G=C(t.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Loop");function Q({show:o,setShow:a,title:d,callBack:h,status:u}){const l=()=>a(!1),m=()=>{l(),h()};return t.jsx(t.Fragment,{children:t.jsxs(i,{show:o,onHide:l,backdrop:"static",keyboard:!1,children:[t.jsx(i.Header,{closeButton:!0,children:t.jsx(i.Title,{children:`${u==="Active"?"Khóa":"Mở khóa"} ${d}`})}),t.jsx(i.Body,{children:`Bạn có chắc chắn muốn ${u==="Active"?"khóa":"mở khóa"} ${d} này?`}),t.jsxs(i.Footer,{children:[t.jsx(b,{variant:"secondary",size:"lg",onClick:l,children:"Không"}),t.jsx(b,{variant:"danger",size:"lg",onClick:()=>m(),children:"Có"})]})]})})}const r=(o,a=20)=>t.jsx(D,{title:o,children:t.jsx("span",{children:o&&o.length>a?o.substring(0,a)+"...":o})}),V=()=>R({typography:{fontSize:20},palette:{background:{default:"#0f172a"},mode:"light"},components:{MuiTableCell:{styleOverrides:{head:{padding:"10px 10px",fontWeight:"bold",borderBottom:"1px solid black"},body:{color:"#000",fontWeight:"bold",borderBottom:"1px solid black"}}}}}),U=()=>{const{userInfo:o}=M(e=>e.auth),[a,d]=c.useState([]),[h,u]=c.useState(null),[l,m]=c.useState(""),[y,g]=c.useState(!1),j=e=>{const n=a.find(s=>s.id===e).status;m(n),u(e),g(!0)},k={searchPlaceholder:"Tìm kiếm theo họ và tên, email, số điện thoại",selectableRows:"none",elevation:5,rowsPerPage:4,rowsPerPageOptions:[4,10,20,30],responsive:"standard",print:!1,download:!1,filter:!1,textLabels:{body:{noMatch:"Không có dữ liệu"},pagination:{rowsPerPage:"Số hàng mỗi trang:",displayRows:"của"},toolbar:{search:"Tìm kiếm",viewColumns:"Xem cột",filterTable:"Lọc bảng"}},onRowClick:(e,n)=>{}},B=[{name:"username",label:"HỌ VÀ TÊN",options:{customBodyRender:e=>r(e,30)}},{name:"email",label:"EMAIL",options:{customBodyRender:e=>r(e,20)}},{name:"phone",label:"SỐ ĐIỆN THOẠI",textAlign:"left",options:{customBodyRender:e=>r(e)}},{name:"birthday",label:"NGÀY SINH",options:{customBodyRender:e=>r(A(e))}},{name:"gender",label:"GIỚI TÍNH",options:{customBodyRender:e=>r(e?"Nữ":"Nam")}},{name:"role",label:"VAI TRÒ",options:{customBodyRender:e=>{const n=E[e]||e;return r(n)}}},{name:"status",label:"TRẠNG THÁI",options:{customBodyRender:e=>{const n=K[e]||e;return r(n)}}},{name:"id",label:"TƯƠNG TÁC",options:{customBodyRender:(e,n)=>t.jsxs("span",{children:[t.jsx("span",{style:{display:"none"},name:"id",children:e}),o&&(o==null?void 0:o.role)===I.ADMIN&&t.jsx(f,{"aria-label":"delete",size:"small",color:"error",onClick:s=>{s.stopPropagation(),j(e)},children:t.jsx(G,{})}),t.jsx(f,{"aria-label":"delete",size:"small",color:"info",children:t.jsx(N,{})})]})}}],p=async()=>{try{const{data:e}=await L(),n=e==null?void 0:e.result.map(s=>({id:s.id,username:s.username,birthday:s.birthday,fullName:s.fullName,email:s.email,address:s.address,phone:s.phone,gender:s.gender,role:s.role,status:s.status}));d(n)}catch(e){console.log(e)}};c.useEffect(()=>{p()},[]);const T=async()=>{try{if(l==="Active"){const{data:e}=await v(h);e!=null&&e.result&&(x.success("Khóa tài khoản thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),p())}else{const{data:e}=await z(h);e!=null&&e.result&&(x.success("Mở khóa tài khoản thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),p())}}catch(e){console.log("err",e)}};return t.jsx(H,{title:"Quản lý giám khảo",description:"Quản lý giám khảo",children:t.jsxs(O,{title:"Quản lý giám khảo",children:[t.jsx(w,{injectFirst:!0,children:t.jsx(S,{theme:V(),children:t.jsx("span",{className:"table-contest table-contest-detail",children:t.jsx(P,{data:a,columns:B,options:k})})})}),t.jsx(Q,{show:y,setShow:g,title:"tài khoản",callBack:T,status:l})]})})};export{U as default};
