import{E as G,G as K,J as A,j as t,K as H,t as Q,b as X,r as U,u as ee,s as te,v as I,L as R,M as d,T as C,d as se,h as re,z as ie,A as ne,N as ae,O as oe}from"./index-DutTsfqV.js";import{H as ce}from"./HeaderVersion1-C-624K_k.js";import{c as le,a as O,b as ue,o as he}from"./object-Cr_6l6Id.js";import{D as me}from"./DatePickerCommon-C4KVsQxa.js";import{r as Z,a as de,b as fe,c as ge,R as pe}from"./Regex-D4bxspT3.js";import{S as q}from"./sweetalert2.all-CrvcFNOK.js";import{F as xe}from"./FadeLoader-C23mz0dl.js";import"./listItemButtonClasses-BQMj5uxz.js";var W={exports:{}};(function(p,S){(function(f,g){p.exports=g()})(G,function(){var f="minute",g=/[+-]\d\d(?::?\d\d)?/g,M=/([+-]|\d\d)/g;return function(D,c,j){var i=c.prototype;j.utc=function(e){var s={date:e,utc:!0,args:arguments};return new c(s)},i.utc=function(e){var s=j(this.toDate(),{locale:this.$L,utc:!0});return e?s.add(this.utcOffset(),f):s},i.local=function(){return j(this.toDate(),{locale:this.$L,utc:!1})};var z=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),z.call(this,e)};var h=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else h.call(this)};var k=i.utcOffset;i.utcOffset=function(e,s){var l=this.$utils().u;if(l(e))return this.$u?0:l(this.$offset)?k.call(this):this.$offset;if(typeof e=="string"&&(e=function(u){u===void 0&&(u="");var y=u.match(g);if(!y)return null;var v=(""+y[0]).match(M)||["-",0,0],b=v[0],$=60*+v[1]+ +v[2];return $===0?0:b==="+"?$:-$}(e),e===null))return this;var n=Math.abs(e)<=16?60*e:e,o=this;if(s)return o.$offset=n,o.$u=e===0,o;if(e!==0){var x=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(n+x,f)).$offset=n,o.$x.$localOffset=x}else o=this.utc();return o};var r=i.format;i.format=function(e){var s=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return r.call(this,s)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var m=i.toDate;i.toDate=function(e){return e==="s"&&this.$offset?j(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var a=i.diff;i.diff=function(e,s,l){if(e&&this.$u===e.$u)return a.call(this,e,s,l);var n=this.local(),o=j(e).local();return a.call(n,o,s,l)}}})})(W);var ve=W.exports;const je=K(ve);var _={exports:{}};(function(p,S){(function(f,g){p.exports=g()})(G,function(){var f={year:0,month:1,day:2,hour:3,minute:4,second:5},g={};return function(M,D,c){var j,i=function(r,m,a){a===void 0&&(a={});var e=new Date(r),s=function(l,n){n===void 0&&(n={});var o=n.timeZoneName||"short",x=l+"|"+o,u=g[x];return u||(u=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:l,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:o}),g[x]=u),u}(m,a);return s.formatToParts(e)},z=function(r,m){for(var a=i(r,m),e=[],s=0;s<a.length;s+=1){var l=a[s],n=l.type,o=l.value,x=f[n];x>=0&&(e[x]=parseInt(o,10))}var u=e[3],y=u===24?0:u,v=e[0]+"-"+e[1]+"-"+e[2]+" "+y+":"+e[4]+":"+e[5]+":000",b=+r;return(c.utc(v).valueOf()-(b-=b%1e3))/6e4},h=D.prototype;h.tz=function(r,m){r===void 0&&(r=j);var a=this.utcOffset(),e=this.toDate(),s=e.toLocaleString("en-US",{timeZone:r}),l=Math.round((e-new Date(s))/1e3/60),n=c(s,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(e.getTimezoneOffset()/15)-l,!0);if(m){var o=n.utcOffset();n=n.add(a-o,"minute")}return n.$x.$timezone=r,n},h.offsetName=function(r){var m=this.$x.$timezone||c.tz.guess(),a=i(this.valueOf(),m,{timeZoneName:r}).find(function(e){return e.type.toLowerCase()==="timezonename"});return a&&a.value};var k=h.startOf;h.startOf=function(r,m){if(!this.$x||!this.$x.$timezone)return k.call(this,r,m);var a=c(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return k.call(a,r,m).tz(this.$x.$timezone,!0)},c.tz=function(r,m,a){var e=a&&m,s=a||m||j,l=z(+c(),s);if(typeof r!="string")return c(r).tz(s);var n=function(y,v,b){var $=y-60*v*1e3,N=z($,b);if(v===N)return[$,v];var V=z($-=60*(N-v)*1e3,b);return N===V?[$,N]:[y-60*Math.min(N,V)*1e3,Math.max(N,V)]}(c.utc(r,e).valueOf(),l,s),o=n[0],x=n[1],u=c(o).utcOffset(x);return u.$x.$timezone=s,u},c.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},c.tz.setDefault=function(r){j=r}}})})(_);var $e=_.exports;const ye=K($e),B="address",be={getDistrict:async()=>await A.get(B),getWard:async p=>await A.get(`${B}/${p}`)},P=(p,S,f,g)=>t.jsx("div",{children:De(p,S,f,g)}),De=(p,S,f,g)=>{let M;q.fire({title:p,html:S,timer:f,timerProgressBar:!0,didOpen:()=>{q.showLoading();const D=q.getPopup().querySelector("b");M=setInterval(()=>{const c=Math.round(q.getTimerLeft()/1e3);D.textContent=`${c}`},100)},willClose:()=>{clearInterval(M)},customClass:{timerProgressBar:"custom-progress-bar"}}).then(D=>{D.dismiss===q.DismissReason.timer&&g()})},ke=()=>{var x,u,y,v,b,$,N,V,Y;H.extend(je),H.extend(ye),H.tz.setDefault("Asia/Ho_Chi_Minh");const p=H(new Date),S=Q(),f=X(),[g,M]=U.useState({districts:[],wards:[],selectedDistrict:""}),{register:{loading:D},jwtToken:c,userInfo:j}=ee(w=>w.auth),i=le().shape({lastname:O().required("Vui lòng nhập Họ của bạn").matches(Z,"Họ không hợp lệ"),firstname:O().required("Vui lòng nhập Tên của bạn").matches(Z,"Tên không hợp lệ"),email:O().matches(de,"Email không hợp lệ").required("Vui lòng nhập email của bạn"),phone:O().matches(fe,"Số điện thoại không hợp lệ").required("Vui lòng nhập số điện thoại của bạn"),userName:O().required("Vui lòng nhập tên tài khoản của bạn"),password:O().required("Vui lòng nhập mật khẩu của bạn").matches(ge,"Mật khẩu của bạn phải chứa 8 ký tự, bao gồm một chữ hoa, một chữ thường, một chữ số và một ký tự đặc biệt."),gender:ue().required("Vui lòng chọn giới tính").typeError("Vui lòng chọn giới tính"),birthday:O().required("Vui lòng chọn ngày sinh").typeError("Vui lòng chọn ngày sinh"),address:O().required("Vui lòng nhập địa chỉ của bạn").typeError("Vui lòng nhập địa chỉ của bạn")}),{handleSubmit:z,control:h,trigger:k,setValue:r,setError:m,watch:a,reset:e,formState:{errors:s}}=te({resolver:he(i),reValidateMode:"onSubmit"});r("gender",0),U.useEffect(()=>{c&&(j.role===I.STAFF?(e(),f("/staff-management/contest")):j.role===I.ADMIN?(e(),f("/admin-management/")):(e(),f("/")))},[c]),U.useEffect(()=>{async function w(){var T;const E=await be.getDistrict();M({...g,districts:(T=E==null?void 0:E.data)==null?void 0:T.result})}w()},[]);const l=async w=>{var L;if(!await k())return;const T=await S(ae(w));if((T==null?void 0:T.type)==="create/fulfilled"){const F=(L=T.payload)==null?void 0:L.message;P(F,"Bạn sẽ được chuyển hướng về trang đăng nhập sau <b></b> giây.",3e3,()=>f("/login"))}else{const F=T.payload;P(F,"Thông báo sẽ đóng sau <b></b> giây.",3e3,()=>S(oe()))}},n=w=>{(w.key==="-"||w.key==="+")&&w.preventDefault()},o=[{value:"0",label:"Nam"},{value:"1",label:"Nữ"}];return t.jsxs("div",{children:[t.jsx(ce,{}),t.jsxs("section",{className:"flat-title-page inner",children:[t.jsx("div",{className:"overlay"}),t.jsx("div",{className:"themesflat-container",children:t.jsx("div",{className:"row",children:t.jsxs("div",{className:"col-md-12",children:[t.jsx("div",{className:"page-title-heading mg-bt-12",children:t.jsx("h1",{className:"heading text-center",children:"ĐĂNG KÝ"})}),t.jsx("div",{className:"breadcrumbs style2",children:t.jsxs("ul",{children:[t.jsx("li",{children:t.jsx(R,{to:"/",children:"Trang chủ"})}),t.jsx("li",{children:"Đăng ký"})]})})]})})})]}),t.jsx("section",{className:"tf-login tf-section",children:t.jsx("div",{className:"themesflat-container",children:t.jsx("div",{className:"row",children:t.jsx("div",{className:"col-12",children:t.jsx("div",{className:"flat-form box-login-email",children:t.jsx("div",{className:"form-inner",children:t.jsxs("form",{action:"#",id:"contactform",className:"select-none",onSubmit:z(l),children:[t.jsxs(d,{container:!0,spacing:4,children:[t.jsx(d,{item:!0,md:6,children:t.jsx(C,{control:h,error:(x=s.lastname)==null?void 0:x.message,id:"lastname",name:"lastname","aria-required":"true",type:"text",placeholder:"Họ"})}),t.jsx(d,{item:!0,md:6,children:t.jsx(C,{control:h,error:(u=s.firstname)==null?void 0:u.message,id:"firstname",name:"firstname","aria-required":"true",type:"text",placeholder:"Tên"})})]}),t.jsxs(d,{sx:{marginTop:"-10px",marginBottom:"24px"},container:!0,spacing:2,children:[t.jsxs(d,{item:!0,md:6,children:[t.jsx("p",{className:"font-weight-bold h5",children:"Ngày sinh"}),t.jsx(me,{defaultValue:p,control:h,error:(y=s.birthday)==null?void 0:y.message,name:"birthday"})]}),t.jsxs(d,{item:!0,md:6,children:[t.jsx("p",{className:"font-weight-bold h5",children:"Giới tính"}),t.jsx(pe,{control:h,error:(v=s==null?void 0:s.gender)==null?void 0:v.message,name:"gender",defaultValue:!1,valueArray:o})]})]}),t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,md:6,children:t.jsx(C,{control:h,error:(b=s.email)==null?void 0:b.message,id:"email",name:"email","aria-required":"true",type:"email",placeholder:"Email"})}),t.jsx(d,{item:!0,md:6,children:t.jsx(C,{control:h,error:($=s.phone)==null?void 0:$.message,id:"phone",name:"phone","aria-required":"true",type:"number",placeholder:"Số điện thoại",className:"number",onKeyDown:n})}),t.jsx(d,{item:!0,md:3})]}),t.jsx(d,{sx:{marginBottom:"12px"},container:!0,children:t.jsx(d,{item:!0,md:12,children:t.jsx(C,{control:h,error:(N=s.userName)==null?void 0:N.message,id:"userName",name:"userName","aria-required":"true",type:"text",placeholder:"Tên tài khoản"})})}),t.jsx(d,{container:!0,children:t.jsx(d,{item:!0,md:12,children:t.jsx(C,{control:h,id:"password",error:(V=s.password)==null?void 0:V.message,name:"password","aria-required":"true",type:"password",placeholder:"Mật khẩu"})})}),t.jsx(d,{container:!0,children:t.jsx(d,{item:!0,md:12,children:t.jsx(C,{control:h,error:(Y=s.address)==null?void 0:Y.message,id:"address",name:"address",placeholder:"Nhập địa chỉ cụ thể như số nhà, tên đường, trường, lớp, ....",className:"mb-15 mt-3",autoFocus:!0})})}),t.jsx("button",{className:"submit flex justify-content-center align-items-center h-100 p-0",children:D?t.jsx("div",{children:t.jsx(xe,{color:se.purple,loading:D,size:2})}):t.jsx("div",{style:{padding:"2rem"},children:"Đăng ký"})}),t.jsxs("div",{className:"mt-5 text-right h5",children:["Bạn đã có tài khoản? ","",t.jsx(R,{to:"/login",className:"font-weight-bold",children:"đăng nhập"})]})]})})})})})})}),t.jsx(re,{})]})};ie(ne)(({theme:p})=>({"& .MuiDialogContent-root":{padding:p.spacing(5)}}));export{ke as default};
