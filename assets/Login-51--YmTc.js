import{r as j,x as S,u as C,y as D,d as L,z as f,j as e,L as o,A as T,B as V,E as I,T as N,f as B,l as E,G as M,J as q,K as z}from"./index-D94Nf2Ir.js";import{H as A}from"./HeaderVersion1-BMhj3OaC.js";import{c as H,a as v,o as G}from"./object-GvH2y-h0.js";import{F as R}from"./FadeLoader-BQzumBN4.js";const U=()=>{var g,p;const[a,n]=j.useState(!1),b=H().shape({username:v().required("Vui lòng nhập username của bạn"),password:v().required("Vui lòng nhập mật khẩu của bạn")}),{handleSubmit:w,control:l,trigger:y,reset:r,formState:{errors:c}}=S({resolver:G(b),reValidateMode:"onSubmit"}),{login:{loading:d,success:m,error:t},jwtToken:h,userInfo:x}=C(s=>s.auth),k=D(),i=L(),F=async s=>{if(await y())k(z(s)).then(O=>{t&&n(!0)});else return},u=()=>{n(!1)};return j.useEffect(()=>{(m||h)&&(x.role===f.STAFF?(r(),i("/staff-management/contest")):x.role===f.ADMIN?(r(),i("/admin-management/")):(r(),i("/"))),t&&n(!0)},[m,t,h]),e.jsxs("div",{children:[e.jsx(A,{}),e.jsxs("section",{className:"flat-title-page inner",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{className:"page-title-heading mg-bt-12",children:e.jsx("h1",{className:"heading text-center",children:"ĐĂNG NHẬP"})}),e.jsx("div",{className:"breadcrumbs style2",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(o,{to:"/",children:"Trang chủ"})}),e.jsx("li",{children:"Đăng nhập"})]})})]})})})]}),e.jsxs(J,{onClose:u,"aria-labelledby":"customized-dialog-title",open:a,children:[e.jsx(T,{"aria-label":"close",onClick:u,sx:{position:"absolute",right:8,top:6,color:s=>s.palette.grey[500]},children:e.jsx(V,{})}),e.jsx(I,{children:e.jsx("div",{className:"space-y-20 pd-40",children:e.jsx("h4",{className:"text-center font-weight-bold",children:"Sai tài khoản hoặc mật khẩu, xin nhập lại"})})})]}),e.jsx("section",{className:"tf-login tf-section",children:e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"flat-form box-login-email",children:e.jsx("div",{className:"form-inner",children:e.jsxs("form",{onSubmit:w(F),className:"select-none",children:[e.jsx(N,{control:l,error:(g=c.username)==null?void 0:g.message,id:"username",name:"username",tabIndex:"1",placeholder:"Tên tài khoản",autoFocus:!0}),e.jsx(N,{control:l,error:(p=c.password)==null?void 0:p.message,id:"password",name:"password",tabIndex:"2","aria-required":"true",type:"password",placeholder:"Mật khẩu"}),e.jsx("div",{className:"row-form style-1 flex-row-reverse",children:e.jsx(o,{to:"/forgot-password",className:"forgot-pass",children:"Quên mật khẩu ?"})}),e.jsx("button",{className:"submit flex justify-content-center align-items-center h-100 p-0",children:d?e.jsx("div",{children:e.jsx(R,{color:B.purple,loading:d,size:2})}):e.jsx("div",{style:{padding:"2rem"},children:"Đăng nhập"})}),e.jsxs("div",{className:"mt-5 text-right h5",children:["Bạn chưa có tài khoản? ","",e.jsx(o,{to:"/sign-up",className:"font-weight-bold",children:"đăng ký"})]})]})})})})})})}),e.jsx(E,{})]})},J=M(q)(({theme:a})=>({"& .MuiDialogContent-root":{padding:a.spacing(5)}}));export{U as default};
