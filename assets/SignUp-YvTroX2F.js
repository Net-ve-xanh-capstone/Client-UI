import{A as R,B as K,C as Z,E as q,q as W,b as J,r as E,u as Q,p as X,G as A,j as e,L as I,J as d,T as O,I as ee,t as te,v as se,d as ie,h as re,x as ae,y as ne,K as oe}from"./index-CjnREt8a.js";import{H as ce}from"./HeaderVersion1-C44kxAQ7.js";import{c as le,a as S,b as ue,o as he}from"./object-id5G4KIX.js";import{r as B,a as de,b as me,D as fe,R as ge}from"./Regex-DTp-FliR.js";import{F as pe}from"./FadeLoader-Dj00oJac.js";import"./listItemButtonClasses-DcV7knyP.js";var _={exports:{}};(function($,k){(function(y,v){$.exports=v()})(R,function(){var y="minute",v=/[+-]\d\d(?::?\d\d)?/g,w=/([+-]|\d\d)/g;return function(M,l,f){var a=l.prototype;f.utc=function(t){var r={date:t,utc:!0,args:arguments};return new l(r)},a.utc=function(t){var r=f(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),y):r},a.local=function(){return f(this.toDate(),{locale:this.$L,utc:!1})};var D=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),D.call(this,t)};var b=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else b.call(this)};var z=a.utcOffset;a.utcOffset=function(t,r){var u=this.$utils().u;if(u(t))return this.$u?0:u(this.$offset)?z.call(this):this.$offset;if(typeof t=="string"&&(t=function(h){h===void 0&&(h="");var N=h.match(v);if(!N)return null;var m=(""+N[0]).match(w)||["-",0,0],j=m[0],p=60*+m[1]+ +m[2];return p===0?0:j==="+"?p:-p}(t),t===null))return this;var o=Math.abs(t)<=16?60*t:t,s=this;if(r)return s.$offset=o,s.$u=t===0,s;if(t!==0){var g=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+g,y)).$offset=o,s.$x.$localOffset=g}else s=this.utc();return s};var n=a.format;a.format=function(t){var r=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return n.call(this,r)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var c=a.toDate;a.toDate=function(t){return t==="s"&&this.$offset?f(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():c.call(this)};var i=a.diff;a.diff=function(t,r,u){if(t&&this.$u===t.$u)return i.call(this,t,r,u);var o=this.local(),s=f(t).local();return i.call(o,s,r,u)}}})})(_);var xe=_.exports;const ve=K(xe);var P={exports:{}};(function($,k){(function(y,v){$.exports=v()})(R,function(){var y={year:0,month:1,day:2,hour:3,minute:4,second:5},v={};return function(w,M,l){var f,a=function(n,c,i){i===void 0&&(i={});var t=new Date(n),r=function(u,o){o===void 0&&(o={});var s=o.timeZoneName||"short",g=u+"|"+s,h=v[g];return h||(h=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:u,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:s}),v[g]=h),h}(c,i);return r.formatToParts(t)},D=function(n,c){for(var i=a(n,c),t=[],r=0;r<i.length;r+=1){var u=i[r],o=u.type,s=u.value,g=y[o];g>=0&&(t[g]=parseInt(s,10))}var h=t[3],N=h===24?0:h,m=t[0]+"-"+t[1]+"-"+t[2]+" "+N+":"+t[4]+":"+t[5]+":000",j=+n;return(l.utc(m).valueOf()-(j-=j%1e3))/6e4},b=M.prototype;b.tz=function(n,c){n===void 0&&(n=f);var i=this.utcOffset(),t=this.toDate(),r=t.toLocaleString("en-US",{timeZone:n}),u=Math.round((t-new Date(r))/1e3/60),o=l(r,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(t.getTimezoneOffset()/15)-u,!0);if(c){var s=o.utcOffset();o=o.add(i-s,"minute")}return o.$x.$timezone=n,o},b.offsetName=function(n){var c=this.$x.$timezone||l.tz.guess(),i=a(this.valueOf(),c,{timeZoneName:n}).find(function(t){return t.type.toLowerCase()==="timezonename"});return i&&i.value};var z=b.startOf;b.startOf=function(n,c){if(!this.$x||!this.$x.$timezone)return z.call(this,n,c);var i=l(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return z.call(i,n,c).tz(this.$x.$timezone,!0)},l.tz=function(n,c,i){var t=i&&c,r=i||c||f,u=D(+l(),r);if(typeof n!="string")return l(n).tz(r);var o=function(N,m,j){var p=N-60*m*1e3,T=D(p,j);if(m===T)return[p,m];var C=D(p-=60*(T-m)*1e3,j);return T===C?[p,T]:[N-60*Math.min(T,C)*1e3,Math.max(T,C)]}(l.utc(n,t).valueOf(),u,r),s=o[0],g=o[1],h=l(s).utcOffset(g);return h.$x.$timezone=r,h},l.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},l.tz.setDefault=function(n){f=n}}})})(P);var je=P.exports;const $e=K(je),G="address",ye={getDistrict:async()=>await Z.get(G),getWard:async $=>await Z.get(`${G}/${$}`)},ze=()=>{var m,j,p,T,C,H,U,Y,F;q.extend(ve),q.extend($e),q.tz.setDefault("Asia/Ho_Chi_Minh");const $=q(new Date),k=W(),y=J(),[v,w]=E.useState(!1),[M,l]=E.useState({districts:[],wards:[],selectedDistrict:""}),f=()=>{w(!1)},{register:{success:a,message:D,loading:b},jwtToken:z}=Q(x=>x.auth),n=le().shape({lastname:S().required("Vui lòng nhập Họ của bạn").matches(B,"Họ không hợp lệ"),firstname:S().required("Vui lòng nhập Tên của bạn").matches(B,"Tên không hợp lệ"),email:S().matches(de,"Email không hợp lệ").required("Vui lòng nhập email của bạn"),phone:S().matches(me,"Số điện thoại không hợp lệ").required("Vui lòng nhập số điện thoại của bạn"),userName:S().required("Vui lòng nhập tên tài khoản của bạn"),password:S().required("Vui lòng nhập mật khẩu của bạn").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/,"Mật khẩu của bạn phải chứa 8 ký tự, bao gồm một chữ hoa, một chữ thường, một chữ số và một ký tự đặc biệt."),gender:ue().required("Vui lòng chọn giới tính").typeError("Vui lòng chọn giới tính"),birthday:S().required("Vui lòng chọn ngày sinh").typeError("Vui lòng chọn ngày sinh"),address:S().required("Vui lòng nhập địa chỉ của bạn").typeError("Vui lòng nhập địa chỉ của bạn")}),{handleSubmit:c,control:i,trigger:t,setValue:r,setError:u,watch:o,formState:{errors:s}}=X({resolver:he(n),reValidateMode:"onSubmit"});r("gender",0),E.useEffect(()=>(z&&y("/"),a!==null&&(w(!0),setTimeout(()=>{w(!1),k(A())},3e3)),a&&setTimeout(()=>{w(!1),k(A()),y("/login")},3e3),()=>{clearTimeout()}),[a]),E.useEffect(()=>{async function x(){var L;const V=await ye.getDistrict();l({...M,districts:(L=V==null?void 0:V.data)==null?void 0:L.result})}x()},[]);const g=async x=>{if(await t())await k(oe(x)).then(()=>{D&&w(!0)});else return},h=x=>{(x.key==="-"||x.key==="+")&&x.preventDefault()},N=[{value:"0",label:"Nam"},{value:"1",label:"Nữ"}];return e.jsxs("div",{children:[e.jsx(ce,{}),e.jsxs("section",{className:"flat-title-page inner",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{className:"page-title-heading mg-bt-12",children:e.jsx("h1",{className:"heading text-center",children:"ĐĂNG KÝ"})}),e.jsx("div",{className:"breadcrumbs style2",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(I,{to:"/",children:"Trang chủ"})}),e.jsx("li",{children:"Đăng ký"})]})})]})})})]}),e.jsx("section",{className:"tf-login tf-section",children:e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"flat-form box-login-email",children:e.jsx("div",{className:"form-inner",children:e.jsxs("form",{action:"#",id:"contactform",className:"select-none",onSubmit:c(g),children:[e.jsxs(d,{container:!0,spacing:4,children:[e.jsx(d,{item:!0,md:6,children:e.jsx(O,{control:i,error:(m=s.lastname)==null?void 0:m.message,id:"lastname",name:"lastname","aria-required":"true",type:"text",placeholder:"Họ"})}),e.jsx(d,{item:!0,md:6,children:e.jsx(O,{control:i,error:(j=s.firstname)==null?void 0:j.message,id:"firstname",name:"firstname","aria-required":"true",type:"text",placeholder:"Tên"})})]}),e.jsxs(d,{sx:{marginTop:"-10px",marginBottom:"24px"},container:!0,spacing:2,children:[e.jsxs(d,{item:!0,md:6,children:[e.jsx("p",{className:"font-weight-bold h5",children:"Ngày sinh"}),e.jsx(fe,{defaultValue:$,control:i,error:(p=s.birthday)==null?void 0:p.message,name:"birthday"})]}),e.jsxs(d,{item:!0,md:6,children:[e.jsx("p",{className:"font-weight-bold h5",children:"Giới tính"}),e.jsx(ge,{control:i,error:(T=s==null?void 0:s.gender)==null?void 0:T.message,name:"gender",valueArray:N})]})]}),e.jsxs(d,{container:!0,spacing:2,children:[e.jsx(d,{item:!0,md:6,children:e.jsx(O,{control:i,error:(C=s.email)==null?void 0:C.message,id:"email",name:"email","aria-required":"true",type:"email",placeholder:"Email"})}),e.jsx(d,{item:!0,md:6,children:e.jsx(O,{control:i,error:(H=s.phone)==null?void 0:H.message,id:"phone",name:"phone","aria-required":"true",type:"number",placeholder:"Số điện thoại",className:"number",onKeyDown:h})}),e.jsx(d,{item:!0,md:3})]}),e.jsx(d,{sx:{marginBottom:"12px"},container:!0,children:e.jsx(d,{item:!0,md:12,children:e.jsx(O,{control:i,error:(U=s.userName)==null?void 0:U.message,id:"userName",name:"userName","aria-required":"true",type:"text",placeholder:"Tên tài khoản"})})}),e.jsx(d,{container:!0,children:e.jsx(d,{item:!0,md:12,children:e.jsx(O,{control:i,id:"password",error:(Y=s.password)==null?void 0:Y.message,name:"password","aria-required":"true",type:"password",placeholder:"Mật khẩu"})})}),e.jsx(d,{container:!0,children:e.jsx(d,{item:!0,md:12,children:e.jsx(O,{control:i,error:(F=s.address)==null?void 0:F.message,id:"address",name:"address",placeholder:"Nhập địa chỉ cụ thể như số nhà, tên đường, trường, lớp, ....",className:"mb-15 mt-3",autoFocus:!0})})}),e.jsxs(De,{onClose:f,"aria-labelledby":"customized-dialog-title",open:v,children:[e.jsx(ee,{"aria-label":"close",onClick:f,sx:{position:"absolute",right:8,top:6,color:x=>x.palette.grey[500]},children:e.jsx(te,{})}),e.jsx(se,{children:e.jsx("div",{className:"space-y-20 pd-40",children:e.jsx("h4",{className:"text-center font-weight-bold",children:D||""})})})]}),e.jsx("button",{className:"submit flex justify-content-center align-items-center h-100 p-0",children:b?e.jsx("div",{children:e.jsx(pe,{color:ie.purple,loading:b,size:2})}):e.jsx("div",{style:{padding:"2rem"},children:"Đăng ký"})}),e.jsxs("div",{className:"mt-5 text-right h5",children:["Bạn đã có tài khoản? ","",e.jsx(I,{to:"/login",className:"font-weight-bold",children:"đăng nhập"})]})]})})})})})})}),e.jsx(re,{})]})},De=ae(ne)(({theme:$})=>({"& .MuiDialogContent-root":{padding:$.spacing(5)}}));export{ze as default};
