import{a as A,r as n,j as e,ag as H,L as v}from"./index-ZXEa8yfF.js";import{H as k}from"./HeaderVersion1-DFydrRrh.js";import{a as q}from"./TooltipMenu-Dn8h3PyQ.js";import{u as B,m as $}from"./useQueryData-BXUt5mny.js";import{u as P}from"./index.esm-CBjfu8mc.js";import{T as o}from"./TextfieldCommon-BQBEs6JI.js";import{T as K,S as m}from"./sweetalert2.all-qqFpS-IX.js";import{R as M}from"./RadioCommon-D33xmXgO.js";import{a as G}from"./imageDefault-DrZ7cyyx.js";import{u as Y}from"./useUploadImage-kn-oguMb.js";import"./Transition-CHKTC27M.js";import"./Tooltip-DuYRBHwk.js";import"./index-C1rxnSHW.js";import"./FormGroup-D6gN1s4D.js";import"./ButtonBase-y9swwTG2.js";import"./createSvgIcon-Cpru_wpL.js";import"./config-VkUvCR_3.js";const oe=()=>{var f,x,p,j,N;const{userInfo:i}=A(s=>s.auth),[h,b]=n.useState(null),[y,u]=n.useState(null),[C,w]=n.useState(null),{url:S}=Y(C),{handleSubmit:U,control:r,formState:{errors:l}}=P({}),L=s=>{(s.key==="-"||s.key==="+")&&s.preventDefault()},T=[{value:"0",label:"Nam"},{value:"1",label:"Nữ"}];function D(s){const t=new Date(s),d=t.getDate(),g=t.getMonth()+1,I=t.getFullYear();return`${d}/${g}/${I}`}const R=async s=>{const t={id:i.Id,phone:"0919047171",fullname:"Phạm Ngọc Minh Anh",address:s.address,avatar:S};m.fire({title:"Bạn có chắc chắn cập nhật?",showCancelButton:!0,confirmButtonText:"Có"}).then(d=>{d.isConfirmed?$.update("accounts",t).then(()=>{m.fire("Cập nhật thành công","","success")}).catch(g=>{m.fire("Cập nhật thất bại thất bại","Hãy thử lại sau bạn nhé","error")}):d.isDenied&&m.fire("Bạn đã hủy","","info")})},O=s=>{const t=s.target.files[0];u(URL.createObjectURL(t)),b(URL.createObjectURL(t)),w(t)};n.useEffect(()=>()=>{h&&URL.revokeObjectURL(h.preview)},[h,i==null?void 0:i.Id]);const{isLoading:E,isError:V,data:c,error:F}=B("accounts/getaccountbyid",`${i.Id}`),a=(f=c==null?void 0:c.data)==null?void 0:f.result;return n.useEffect(()=>{a!==void 0&&(a.avatar?u(a.avatar):u(G))},[c]),E?e.jsx(H,{}):V?e.jsxs("span",{children:["Error: ",F.message]}):e.jsxs("div",{children:[e.jsx(k,{}),e.jsxs("section",{className:"flat-title-page inner",children:[e.jsx("div",{className:"overlay"}),e.jsx("div",{className:"themesflat-container",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{className:"page-title-heading mg-bt-12",children:e.jsx("h1",{className:"heading text-center",children:"Thông tin cá nhân"})}),e.jsx("div",{className:"breadcrumbs style2",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(v,{to:"/",children:"Trang chủ"})}),e.jsx("li",{children:"Thông tin cá nhân"})]})})]})})})]}),e.jsx("div",{className:"tf-create-item tf-section",children:e.jsx("div",{className:"themesflat-container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-3 col-lg-4 col-md-6 col-12",children:e.jsxs("div",{className:"sc-card-profile text-center",children:[e.jsx("div",{className:"card-media",children:e.jsx("img",{id:"profileimg",src:y,alt:"Axies"})}),e.jsxs("div",{id:"upload-profile",children:[e.jsx(v,{to:"#",className:"btn-upload",children:"Cập nhật hình ảnh mới"}),e.jsx("input",{id:"tf-upload-img",type:"file",name:"profile",onChange:O,required:""})]})]})}),e.jsx("div",{className:"col-xl-9 col-lg-9 col-md-12 col-12",children:e.jsx("div",{className:"form-upload-profile",children:e.jsxs("form",{className:"form-profile",action:"#",onSubmit:U(R),children:[e.jsx("div",{className:"form-infor-profile",children:e.jsxs("div",{className:"info-account",children:[e.jsx("h4",{className:"title-create-item",children:"Thông tin cơ bản"}),e.jsxs("fieldset",{children:[e.jsx("h4",{className:"title-infor-account",children:"Họ và tên"}),e.jsx(o,{control:r,className:"color-disabled",type:"text",name:"fullname",placeholder:"Họ và tên",defaultValue:a==null?void 0:a.fullName,readOnly:!0})]}),e.jsx("fieldset",{children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-half mr-auto",children:[e.jsx("h4",{className:"title-infor-account",children:"Ngày sinh"}),e.jsx(o,{className:"color-disabled",defaultValue:D(a==null?void 0:a.birthday),control:r,error:(x=l.birthday)==null?void 0:x.message,name:"birthday",readOnly:!0})]}),e.jsxs("div",{className:"w-birthday",children:[e.jsx("h4",{className:"title-infor-account",children:"Giới tính"}),e.jsx(M,{disabled:!0,control:r,error:(p=l==null?void 0:l.gender)==null?void 0:p.message,defaultValue:a==null?void 0:a.gender,name:"gender",valueArray:T})]})]})}),e.jsxs("fieldset",{children:[e.jsx("h4",{className:"title-infor-account",children:"Số điện thoại"}),e.jsx(o,{control:r,error:(j=l.phone)==null?void 0:j.message,className:"number color-disabled",name:"phone","aria-required":"true",type:"number",defaultValue:a==null?void 0:a.phone,placeholder:"Số điện thoại",onKeyDown:L,readOnly:!0})]}),e.jsxs("fieldset",{children:[e.jsx("h4",{className:"title-infor-account",children:"Email"}),e.jsx(o,{control:r,className:"color-disabled",error:(N=l.email)==null?void 0:N.message,id:"email",name:"email","aria-required":"true",type:"email",defaultValue:a==null?void 0:a.email,placeholder:"Nhập email",readOnly:!0})]}),e.jsxs("fieldset",{children:[e.jsx("h4",{className:"title-infor-account",children:"Địa chỉ"}),e.jsx(K,{control:r,id:"address",name:"address","aria-required":"true",type:"text",defaultValue:a==null?void 0:a.address,placeholder:"Nhập địa chỉ"})]})]})}),e.jsx("div",{style:{width:"100%"},className:"flex",children:e.jsx("button",{className:"tf-button-submit mg-t-15 button-center",type:"submit",children:"Cập nhật"})})]})})})]})})}),e.jsx(q,{})]})};export{oe as default};
